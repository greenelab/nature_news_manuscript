<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Natalie R. Davidson" />
  <meta name="author" content="Casey S. Greene" />
  <meta name="dcterms.date" content="2021-07-27" />
  <meta name="keywords" content="markdown, publishing, manubot" />
  <title>Analysis of science journalism reveals gender and regional disparities in coverage</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/main/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta name="dc.title" content="Analysis of science journalism reveals gender and regional disparities in coverage" />
  <meta name="citation_title" content="Analysis of science journalism reveals gender and regional disparities in coverage" />
  <meta property="og:title" content="Analysis of science journalism reveals gender and regional disparities in coverage" />
  <meta property="twitter:title" content="Analysis of science journalism reveals gender and regional disparities in coverage" />
  <meta name="dc.date" content="2021-07-27" />
  <meta name="citation_publication_date" content="2021-07-27" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Natalie R. Davidson" />
  <meta name="citation_author_institution" content="University of Colorado School of Medicine, Aurora, Colorado, United States of America; Center for Health AI" />
  <meta name="citation_author_orcid" content="0000-0002-1745-8072" />
  <meta name="twitter:creator" content="@n_rose_d" />
  <meta name="citation_author" content="Casey S. Greene" />
  <meta name="citation_author_institution" content="University of Colorado School of Medicine, Aurora, Colorado, United States of America; Center for Health AI" />
  <meta name="citation_author_orcid" content="0000-0001-8713-9213" />
  <meta name="twitter:creator" content="@GreeneScientist" />
  <link rel="canonical" href="https://greenelab.github.io/nature_news_manuscript/" />
  <meta property="og:url" content="https://greenelab.github.io/nature_news_manuscript/" />
  <meta property="twitter:url" content="https://greenelab.github.io/nature_news_manuscript/" />
  <meta name="citation_fulltext_html_url" content="https://greenelab.github.io/nature_news_manuscript/" />
  <meta name="citation_pdf_url" content="https://greenelab.github.io/nature_news_manuscript/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://greenelab.github.io/nature_news_manuscript/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://greenelab.github.io/nature_news_manuscript/v/83e8d5261a4513a82430b385fd762ba2c59d6270/" />
  <meta name="manubot_html_url_versioned" content="https://greenelab.github.io/nature_news_manuscript/v/83e8d5261a4513a82430b385fd762ba2c59d6270/" />
  <meta name="manubot_pdf_url_versioned" content="https://greenelab.github.io/nature_news_manuscript/v/83e8d5261a4513a82430b385fd762ba2c59d6270/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="og:image" content="https://github.com/nrosed/nature_news_disparities/raw/0253bf0db8871f17d1e41182b61eeffc2721d43c/figure_notebooks/illustrator_pdfs/nature_news_ex_fig1b.png" />
  <meta property="twitter:image" content="https://github.com/nrosed/nature_news_disparities/raw/0253bf0db8871f17d1e41182b61eeffc2721d43c/figure_notebooks/illustrator_pdfs/nature_news_ex_fig1b.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
  
  <!-- pandoc-eqnos: equation style -->
  <style>
    .eqnos { display: inline-block; position: relative; width: 100%; }
    .eqnos br { display: none; }
    .eqnos-number { position: absolute; right: 0em; top: 50%; line-height: 0; }
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Analysis of science journalism reveals gender and regional disparities in coverage</h1>
</header>
<p><small><em>
This manuscript
(<a href="https://greenelab.github.io/nature_news_manuscript/v/83e8d5261a4513a82430b385fd762ba2c59d6270/">permalink</a>)
was automatically generated
from <a href="https://github.com/greenelab/nature_news_manuscript/tree/83e8d5261a4513a82430b385fd762ba2c59d6270">greenelab/nature_news_manuscript@83e8d52</a>
on July 27, 2021.
</em></small></p>
<h2 id="authors">Authors</h2>
<ul>
<li><p><strong>Natalie R. Davidson</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0002-1745-8072">0000-0002-1745-8072</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/nrosed">nrosed</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/n_rose_d">n_rose_d</a><br>
<small>
University of Colorado School of Medicine, Aurora, Colorado, United States of America; Center for Health AI
· Funded by The Gordon and Betty Moore Foundation (GBMF 4552)
</small></p></li>
<li><p><strong>Casey S. Greene</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0001-8713-9213">0000-0001-8713-9213</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/cgreene">cgreene</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/GreeneScientist">GreeneScientist</a><br>
<small>
University of Colorado School of Medicine, Aurora, Colorado, United States of America; Center for Health AI
· Funded by The Gordon and Betty Moore Foundation (GBMF 4552)
</small></p></li>
</ul>
<h2 class="page_break_before" id="abstract">Abstract</h2>
<p>Science journalism is a critical way in which the public can remain informed and benefit from new scientific findings.
Such journalism also shapes the public’s view of the current state of scientific findings and legitimizes experts.
Those covering science can only cite and quote a limited number of sources.
Sources may be identified by the journalist’s research or by recommendations by other scientists.
In both cases, biases may influence who is identified and ultimately included as an expert.
To ensure our results are generalizable, we analyzed two journalism outlets that cater to different demogrgaphics, <em>Nature</em> and <em>The Guardian</em>.
This resulted in 37,748 total articles, 15,747 science-related articles from <em>The Guardian</em> and 22,001 non-research articles published by <em>Nature</em> to quantify possible disparities.
Our analysis considered three possible sources of disparity: gender, name origin, and country affiliation.
To explore these sources of disparity, we extracted cited authors’ names and affiliations, as well as extracted names of quoted speakers.
While citations and quotations within a piece do not reflect the entire information-gathering process, they can provide insight into the demographics of visible sources.
We then used the extracted names to predict gender and name origin of the cited authors and speakers. <!-- maybe add caveat here --></p>
<p>In order to appropriately quantify the level of difference, we must identify a suitable reference set for comparison.
We chose first and last authors within primary research articles in <em>Nature</em> and a subset of <em>Springer Nature</em> articles in the same time period as our comparator.
In our analysis, we found a very similar skew towards male quotation in both <em>The Guardian</em> and <em>Nature</em> science journalism-related articles.
However, quotation in <em>Nature</em> is trending toward equal representation at a faster rate than first and last authorship in academic publishing.
Interestingly, we found that the gender disparity in <em>Nature</em> quotes was column-dependent, with the “Career Features” column reaching gender parity.
Our name origin analysis found a significant over-representation of names with predicted Celtic/English origin and under-representation of names with a predicted East Asian origin.
This finding was observed both in extracted quotes and journal citations, but dampened in citations.
Finally, we performed an analysis to identify how countries vary in the way that they’re described in scientific journalism.
We focused on two groups of countries: countries that are often mentioned in articles, but do not often have affiliated authors cited, and countries that have affiliated authors that are often cited, but the country is not typically mentioned.
We found that the articles in which the less cited countries occur tend to have more agricultural, extraction-related, and political terms, whereas articles including highly cited countries have broader scientific terms.
This discrepancy indicates a possible lack of regional diversity in the reporting of scientific output.</p>
<h2 id="introduction">Introduction</h2>
<p>Science journalism is an indispensable part of scientific communication and provides an accessible way for everyone from researchers to the public to learn about new scientific findings and to consider their implications.
However, it is important to identify the ways in which its coverage may skew towards particular demographics.
Coverage of science shapes who is considered a scientist and field expert by both peers and the public.
This indication of legitimacy can either help recognize people who are typically overlooked due to systemic biases or intensify biases.
Journalistic biases in general-interest, online and printed news have been observed by journalists themselves <span class="citation" data-cites="9uN0d5DN CR5YHhw8 gud4dlat soMuDIhH">[<a href="#ref-9uN0d5DN" role="doc-biblioref">1</a>,<a href="#ref-CR5YHhw8" role="doc-biblioref">2</a>,<a href="#ref-gud4dlat" role="doc-biblioref">3</a>,<a href="#ref-soMuDIhH" role="doc-biblioref">4</a>]</span>, as well as by independent researchers <span class="citation" data-cites="zAQZlRnL 2svoFkJj 1onBkffH WRatNaGC DvlDdQFN 1718NkivT">[<a href="#ref-zAQZlRnL" role="doc-biblioref">5</a>,<a href="#ref-2svoFkJj" role="doc-biblioref">6</a>,<a href="#ref-1onBkffH" role="doc-biblioref">7</a>,<a href="#ref-WRatNaGC" role="doc-biblioref">8</a>,<a href="#ref-DvlDdQFN" role="doc-biblioref">9</a>,<a href="#ref-1718NkivT" role="doc-biblioref">10</a>]</span>.
Researchers found a gap between male and female subjects or sources, with independent studies finding that between 17-40% of total subjects were female across multiple general-interest printed news outlets between 1985 and 2015 <span class="citation" data-cites="zAQZlRnL 2svoFkJj 1718NkivT">[<a href="#ref-zAQZlRnL" role="doc-biblioref">5</a>,<a href="#ref-2svoFkJj" role="doc-biblioref">6</a>,<a href="#ref-1718NkivT" role="doc-biblioref">10</a>]</span>.
One study found 27-35% of total subjects in international science and health related news were female between 1995 and 2015, and 46% in print, radio, and television in the United States in 2015 <span class="citation" data-cites="1718NkivT">[<a href="#ref-1718NkivT" role="doc-biblioref">10</a>]</span>.
It should be noted that scientific news coverage is confounded by the existing differences in gender and racial demographics within the scientific field <span class="citation" data-cites="1A5ym3UHq mljKbJAo">[<a href="#ref-1A5ym3UHq" role="doc-biblioref">11</a>,<a href="#ref-mljKbJAo" role="doc-biblioref">12</a>]</span>.
However, we are interested in quantifying disparities with respect to observed demographic differences in the scientific field, using academic authorship as an estimate for the existing demographics.
This is similar to other studies that have quantified gender or racial disparities in science as observed in citation <span class="citation" data-cites="45G5HGj2 tTpbrlgZ">[<a href="#ref-45G5HGj2" role="doc-biblioref">13</a>,<a href="#ref-tTpbrlgZ" role="doc-biblioref">14</a>]</span> and funding rates <span class="citation" data-cites="hszzrI56 lomwLdKL hP9R3Quu n2VRCgZG njNa3CYa">[<a href="#ref-hszzrI56" role="doc-biblioref">15</a>,<a href="#ref-lomwLdKL" role="doc-biblioref">16</a>,<a href="#ref-hP9R3Quu" role="doc-biblioref">17</a>,<a href="#ref-n2VRCgZG" role="doc-biblioref">18</a>,<a href="#ref-njNa3CYa" role="doc-biblioref">19</a>]</span>.
<!-- CUT and publication rates [@doi:10.1007/s11192-012-0893-4; @doi:10.1073/pnas.1915378117; @doi:10.1257/pandp.20181111]. --></p>
<!-- CUT It is crucial to ensure that science news coverage does not solely focus on a few well-known scientists, but expands our shared view of an expert scientist. -->
<p>In researching a story, a journalist will typically interview multiple sources for their opinion, potentially asking for additional sources, thus allowing individual unconscious biases at any point along the interview chain to skew scientific coverage broadly.
In addition, the repeated selection of a small set of field experts or the approach a journalist takes in establishing a new source may intensify existing biases <span class="citation" data-cites="11fb3ccQ4 gud4dlat soMuDIhH">[<a href="#ref-gud4dlat" role="doc-biblioref">3</a>,<a href="#ref-soMuDIhH" role="doc-biblioref">4</a>,<a href="#ref-11fb3ccQ4" role="doc-biblioref">20</a>]</span>.
While disparities in representation may go unnoticed in a single article, analyzing a large corpus of articles can identify and quantify these disparities and help guide institutional and individual self-reflection.
In the same vein as previous media studies <span class="citation" data-cites="zAQZlRnL 2svoFkJj 1onBkffH WRatNaGC DvlDdQFN 1718NkivT">[<a href="#ref-zAQZlRnL" role="doc-biblioref">5</a>,<a href="#ref-2svoFkJj" role="doc-biblioref">6</a>,<a href="#ref-1onBkffH" role="doc-biblioref">7</a>,<a href="#ref-WRatNaGC" role="doc-biblioref">8</a>,<a href="#ref-DvlDdQFN" role="doc-biblioref">9</a>,<a href="#ref-1718NkivT" role="doc-biblioref">10</a>]</span>, we sought to quantify gender and regional differences of journalism beyond the existing demographic differences in the scientific field.
Our study focused solely on scientific journalism, specifically content published by <em>Nature</em>.
Since <em>Nature</em> also publishes primary research articles, we used these data to determine the demographics of the expected set of possible sources.
For clarity, throughout this manuscript we will refer to journalistic articles as <em>news</em> and academic, primary research articles as <em>papers</em>.
Furthermore, when we refer to “authors” we mean authors of academic papers, not journalists; this work did not scrape any journalists’ names, nor derive any insights about individual journalists.
In our analysis, we identified quoted and cited people by analyzing the content and citations within all news articles from 2005 to 2020, and compared this demographic to the academic publishing demographic by analyzing first and last authorship statistics across all <em>Nature</em> papers during the same time period.</p>
<p>Through our analysis of 37,748 news articles from two disparate news outlets, we were able to identify &gt;150,000 quotes and &gt;8,000 citations with sufficient speaker or author information. <!-- check citation number -->
We also identified first and last authors of &gt;10,000 <em>Nature</em> papers.
We then identified possible gender or regional differences using the extracted names.
The extracted names were used to generate three data-types: quoted, mentioned, and cited people.
We used computational methods to predict gender and identified a trend towards quotes from people predicted male in news articles when compared to both the general population and predicted male authorship in papers.
Within the period that we examined, the proportion of predicted male attributed quotes in news articles went from initially higher to currently lower than the proportion of male first and last authors in <em>Nature</em> papers.
Furthermore, we found that the quote difference was dependent on article type; the “Career Feature” column achieved gender parity in quoted speakers.
We also used computational methods to predict name origins and found a significant over-representation of names with predicted Celtic/English origin and under-representation of names with a predicted East Asian origin in both quotes and citations.</p>
<p>While we focused on news from <em>Nature</em> and <em>The Guardian</em>, our software can be repurposed to analyze other text.
We hope that publishers will welcome systems to identify disparities and use them to improve representation in journalism.
Furthermore, our approach is limited by the features we were able to extract, which only reflects a portion of the journalistic process.
Journalists could additionally track all sources they contact to self-audit.
However, auditing is only part of the solution; journalists and source recommenders must also change their source gathering patterns.
To help change these patterns, there exist guides <span class="citation" data-cites="11fb3ccQ4">[<a href="#ref-11fb3ccQ4" role="doc-biblioref">20</a>]</span>, databases <span class="citation" data-cites="TPNkhIbZ">[<a href="#ref-TPNkhIbZ" role="doc-biblioref">21</a>]</span>, and affinity groups <span class="citation" data-cites="11fb3ccQ4">[<a href="#ref-11fb3ccQ4" role="doc-biblioref">20</a>]</span> that can help us all expand our vision of who can be a field expert.</p>
<h2 id="methods">Methods</h2>
<h3 id="data-acquisition-and-processing">Data Acquisition and Processing</h3>
<h4 id="text-scraping">Text Scraping</h4>
<p>We scraped all text and metadata from <em>Nature</em> using the web-crawling framework Scrapy <span class="citation" data-cites="mfJiAqsK">[<a href="#ref-mfJiAqsK" role="doc-biblioref">23</a>]</span> (version 2.4.1).
We created three independent scrapy web spiders to process the news text, news citations, and paper metadata.
News articles were defined as all articles from 2005 to 2020 that were designated as “News”, “News Feature”, “Career Feature”, “Technology Feature”, and “Toolbox”.
Using the spider “target_year_crawl.py”, we scraped the title and main text from all news articles.
We character normalized the main text by mapping visually identical Unicode codepoints to a single Unicode codepoint and stripping many invalid Unicode characters.
Using an additional spider defined in “doi_crawl.py”, we scaped all citations within news articles.
For simplicity, we only considered citations with a DOI included in either text or a hyperlink in this spider.
Other possible forms of citations, e.g., titles, were not included.
The DOIs were then queried using the <em>Springer Nature</em> API.
The spider “article_author_crawl.py” scraped all articles designated “Article” or “Letters” from 2005 to 2020.
We only scraped author names, author positions, and associated affiliations from research articles, which we refer to as <em>papers</em>.
It should be noted that “News” article designations changed over time.</p>
<h4 id="the-guardian-api"><em>The Guardian</em> API</h4>
<p>To obtain science-related articles from <em>The Guardian</em>, we used their API which is available here: https://open-platform.theguardian.com/.
We queried for 100 articles in the “science” section per month from 2005 to 2020, which typically covered all available articles.
All html was removed using the R package textclean <span class="citation" data-cites="10Tp6Hjnp">[<a href="#ref-10Tp6Hjnp" role="doc-biblioref">24</a>]</span>.
Similar to the data scraped from <em>Nature</em>, we also mapped visually identical Unicode codepoints to a single Unicode codepoint and stripped all non-ASCII characters.
Since citations are hyperlinked in-line, we did not extract any citation information from <em>The Guaradian</em>.</p>
<h4 id="corenlp">coreNLP</h4>
<p>After the news articles were scraped and processed, the text was processed using the coreNLP pipeline <span class="citation" data-cites="RQkLuc5t">[<a href="#ref-RQkLuc5t" role="doc-biblioref">25</a>]</span> (version 4.2.0).
The main purpose for using coreNLP was to identify named entities related to countries and quoted speakers.
The full set of annotaters were: tokenize, ssplit, pos, lemma,ner, parse, coref, quote.
We used the “statistical” algorithm to perform coreference resolution.
All results were output to json format for further downstream processing.</p>
<h4 id="springer-nature-api"><em>Springer Nature</em> API</h4>
<p><em>Springer Nature</em> was chosen over other publishers for multiple reasons: 1) it is a large publisher, second only to Elsevier; 2) it covers multiple subjects, in contrast to PubMed; 3) its API has a large daily query limit (5000/day); and 4) it provided more author affiliation information than found in Elsevier.
We generated a comparative background set for supplemental analysis with the <em>Springer Nature</em> API by obtaining author information for papers cited in news articles.
We selected a random set of papers to generate the <em>Springer Nature</em> background set.
These papers were the first 200 English language “Journal” papers returned by the <em>Springer Nature</em> API for each month, resulting in 2400 papers per year for 2005 through 2020.
To obtain the author information for the cited papers, we queried the <em>Springer Nature</em> API using the scraped DOI.
For both API query types, the author names, positions, and affiliations for each publication were stored and are available in “all_author_country.tsv” and “all_author_fullname.tsv”.</p>
<h3 id="name-formatting">Name Formatting</h3>
<h4 id="name-formatting-for-gender-prediction-in-quotes-or-mentions">Name Formatting for Gender Prediction in Quotes or Mentions</h4>
<p>We first pre-filter articles that have more than 25 quotes, which is 1.86% (704/37,748) of total articles.
This was done to ensure no single article is over-represented and to avoid spuriously identified quotes due to unusual article formatting.
To identify the gender of a quoted or mentioned person, we first attempt to identify the person’s full name.
Even though genderizeR only uses the first name to make the gender prediction, identifying the full name gives us greater confidence that we are using the first name.
To identify the full name, we take the predicted speaker by coreNLP and match it to the longest matching name within the same article.
We match names by finding the longest mentioned name in the article with minimal edit (Levenshtein) distance.
The name with the smallest edit distance, where character deletions have zero cost, is defined as the matching name.
Character deletion was assigned a zero cost because we would like exact substring matches.
For example, the calculated cost, including a cost for character deletion, between John and John Steinberg is 10; without character deletion, it is 0.
Compared with the distance between John and Jane Doe, with character deletion cost, it is 7; without it is 2.
If we are still unable to find a full name, or if coreNLP cannot identify a speaker at all, we also determine whether or not coreNLP linked a gendered pronoun to the quote.
If so, we predict that the gender of the speaker is the gender of the pronoun.
We ignore all quotes with no name or partial names and no associated pronouns.
A summary of processed gender predictions of quotes at each point of processing is provided in Table <a href="#tbl:table1">1</a>.</p>
<h4 id="name-formatting-for-gender-prediction-of-authors">Name Formatting for Gender Prediction of Authors</h4>
<p>Because we separate first and last authors, we only considered papers with more than one author.
As for quotes, we needed to extract the first name of the authors.
We cast names to lowercase and processed them using the R package humaniformat <span class="citation" data-cites="dJT5FREG">[<a href="#ref-dJT5FREG" role="doc-biblioref">26</a>]</span>.
humaniformat identifies if names are reversed (Lastname, Firstname), as well as identifies middle names.
This processing was not required for quote prediction because names written in news articles did not appear to be reversed or abbreviated.
Since many last or first authorships may be non-names, we additionally filtered out any identified names if they partially or fully match any of the following terms: “consortium”, “group”, “initiative”, “team”, “collab”, “committee”, “center”, “program”, “author”, or “institute”.
Furthermore, since many papers only contain first name initials (for example, “N. Davidson”), we remove any names less than four letters (length includes punctuation) and containing a “.” or “-”, then strip out all periods from the first name.
This ensures that hyphenated names are not changed, e.g. Julia-Louise remains unchanged, but removes hyphenated initials, e.g. J-L.
Finally, we only consider any remaining first names of more than two characters.
This is to eliminate first and middle jointly-initialized names.
For example, “NR Davidson” would be reduced to “Davidson” and then eliminated due to the lack of a first name.
A summary of processed author gender predictions at each point of processing is provided in Tables <a href="#tbl:table2">2</a> - <a href="#tbl:table4">4</a>.</p>
<h4 id="name-formatting-for-name-origin-prediction">Name Formatting for Name Origin Prediction</h4>
<p>In contrast to the gender prediction, we require the entire name in all steps of name origin prediction.
For names identified in the <em>Nature</em> news articles, we use the same process as described for the gender prediction; we again try to identify the full name.
For author names, we process the names as previously described for the gender prediction of authors.
For all names, we only consider them in our analyses if they consist of two distinct parts separated by a space.
Additionally, if a full name is less than three characters, we were unable to consider it as the prediction model that we apply uses 3-mers.
A summary of processed name origin predictions of quotes and citations at each point of processing is provided in Tables <a href="#tbl:table1">1</a> - <a href="#tbl:table4">4</a>.</p>
<h3 id="gender-analysis">Gender Analysis</h3>
<p>The quote extraction and attribution annotator from the coreNLP pipeline was employed to identify quotes and their associated speakers in the article text.
In some cases, coreNLP could not identify an associated speaker’s name but instead assigned a gendered pronoun.
In these instances, we used the gender of the pronoun for the analysis.
The R package genderizeR <span class="citation" data-cites="cLM5pKQN">[<a href="#ref-cLM5pKQN" role="doc-biblioref">27</a>]</span>, a wrapper for the genderize.io API <span class="citation" data-cites="15Jxi2IvD">[<a href="#ref-15Jxi2IvD" role="doc-biblioref">28</a>]</span>, predicted the gender of authors and speakers.
We predicted a name as male using the first name with a minimum cutoff of 50%.
To reduce the number of queries made to genderize.io, a previously cached gender prediction from <span class="citation" data-cites="b1Ltmp3Z">[<a href="#ref-b1Ltmp3Z" role="doc-biblioref">29</a>]</span> was also used and can be found in the file “genderize.tsv”.
All first name predictions from this analysis are in the file “genderize_update.tsv”.
To estimate the gender gap for the quote gender analyses, we used the proportion of total quotes, not quoted speakers.
We used the proportion of quotes to measure speaker participation instead of only the diversity of speakers.
The specific formulas for a single year are shown in equations <a href="#eq:quote">1</a> and <a href="#eq:first-author">2</a>.
We did not consider any names where no prediction could be made or quotes where neither speaker nor gendered pronoun was associated.</p>
<p><span id="eq:quote" class="eqnos"><span class="math display">\[\textrm{Prop. Male Quotes} = \frac{|\textrm{Male Speaker Quotes}|} {|\textrm{Male or Female Speaker Quotes}|}\]</span><span class="eqnos-number">(1)</span></span></p>
<p><span id="eq:first-author" class="eqnos"><span class="math display">\[\textrm{Prop. Male First Authors} = \frac{|\textrm{Male First Authors}|} {|\textrm{Male or Female First Authors}|}\]</span><span class="eqnos-number">(2)</span></span></p>
<h3 id="name-origin-analysis">Name Origin Analysis</h3>
<p>We used the same quoted speakers as described in the previous section for the name origin analysis.
In addition, we also consider all authors cited in a <em>Nature</em> news article.
In contrast to the gender prediction, we need to use the full name to predict name origin.
We submitted all extracted full names to Wiki-2019LSTM <span class="citation" data-cites="b1Ltmp3Z">[<a href="#ref-b1Ltmp3Z" role="doc-biblioref">29</a>]</span> to predict one of ten possible name origins: African, Celtic/English, East Asian, European, Greek, Hispanic, Hebrew, Arabic/Turkish/Persian, Nordic, and South Asian.
While a full description of Wiki-2019LSTM is outside the scope of this paper, we describe it here breifly.
Wiki-2019LSTM is trained on name and nationality pairs, using 3-mers of the characters in a name to predict a nationality.
To ensure robust predictions, nationalities were grouped together as described in NamePrism <span class="citation" data-cites="OqLU02w9">[<a href="#ref-OqLU02w9" role="doc-biblioref">30</a>]</span>.
NamePrism chose to exclude the United States, Australia, and Canada from their country groupings and were therefore excluded during training of Wiki-2019LSTM.
This choice was justified by NamePrism in stating that these countries had a high level of immigration.
The treemap of country groupings defined in the NamePrism manuscript are found in figure 5 of the publication <span class="citation" data-cites="OqLU02w9">[<a href="#ref-OqLU02w9" role="doc-biblioref">30</a>]</span>.</p>
<p>After running the pre-trained Wiki-2019LSTM model, we select the highest probability origin for each name as the resultant assignment.
Similar to the gender analyses, quote proportions were again directly compared against publication rates.
For citations, quotes, and mentions, we calculated the proportion for a given year for each name origin.
This is shown in <a href="#eq:cite-origin">3</a> to, for example, calculate the citation rate for last authors with a Greek name origin for a single year.</p>
<p><span id="eq:cite-origin" class="eqnos"><span class="math display">\[\textrm{Prop. Greek Last Author Cited} = \frac{| \textrm{Cited Last Authors w/Greek Name}|} {| \textrm{Cited Last Authors w/any Name}|}\]</span><span class="eqnos-number">(3)</span></span></p>
<p><span id="eq:quote-origin" class="eqnos"><span class="math display">\[\textrm{Prop. Greek Quotes} = \frac{| \textrm{Quotes w/Greek Named Speaker}|} {| \textrm{Quotes w/any Named Speaker}|}\]</span><span class="eqnos-number">(4)</span></span></p>
<p><span id="eq:quote-origin" class="eqnos"><span class="math display">\[\textrm{Prop. Greek Names Mentioned} = \frac{| \textrm{Unique Greek Names Mentioned}|} {| \textrm{Unique Names w/any Origin Mentioned}|}\]</span><span class="eqnos-number">(5)</span></span></p>
<h3 id="country-mention-proportions">Country Mention Proportions</h3>
<p>We estimated the prevalence of a country’s mentions by including all identified organizations, countries, states, or provinces from coreNLP’s named entity annotater.
We queried the resultant terms using OpenStreetMap <span class="citation" data-cites="1pU88qoC">[<a href="#ref-1pU88qoC" role="doc-biblioref">31</a>]</span> to identify the associated country with the term.
All terms that were identified in the text 25 or more times were visually inspected for correctness.
Hand-edited entries are denoted in the OpenStreetMap cache file “osm_cache.tsv” by the column “hand_edited”.
Still, this only accounts for less than 5% of the total entries.
Furthermore, country-associated terms identified by coreNLP may be ambiguous, causing OpenStreetMap to return incorrect locations.
Therefore, we count country mentions only if we find at least two unique country-associated terms in an article.
We calculate the mentioned rate as the proportion of country-specific mentions divided by the total articles for a particular year, as exemplified in <a href="#eq:mention">6</a> for calculating the mentioned rate for Mexico for a single year.</p>
<p><span id="eq:mention" class="eqnos"><span class="math display">\[\textrm{Prop. Mexico Mentions} = \frac{|\textrm{Articles with} \geq 2 \textrm{ unique Mexico-related terms}|} {|\textrm{All News Articles}|}\]</span><span class="eqnos-number">(6)</span></span></p>
<h3 id="country-citation-proportions">Country Citation Proportions</h3>
<p>To identify the citation rate of a particular country, we processed all authors’ affiliations for a specific article.
Since the affiliations could be in multiple formats, we again used OpenStreetMap to identify the country affiliation.
Additionally, we considered all affiliations for a single author.
We calculated a countries’ citation rate as the number of citations for a country divided by either the number of <em>Nature</em> papers (<a href="#eq:mention-bg">7</a>) or the total number of papers cited by news articles for that year (<a href="#eq:mention-news">8</a>).
Shown below are example calculations for Colombia for a single year.</p>
<p><span id="eq:mention-bg" class="eqnos"><span class="math display">\[\textrm{Prop. CO Affil. in Nature} = \frac{|\textrm{Articles with} \geq 1 \textrm{ CO affil. in Nature}|} {|\textrm{All Nature Research Articles}|}\]</span><span class="eqnos-number">(7)</span></span></p>
<p><span id="eq:mention-news" class="eqnos"><span class="math display">\[\textrm{Prop. CO Affil. Citations} = \frac{|\textrm{Cited Articles in News with} \geq 1 \textrm{ CO affil.}|} {|\textrm{All Articles Cited in News}|}\]</span><span class="eqnos-number">(8)</span></span></p>
<h3 id="divergent-word-identification">Divergent Word Identification</h3>
<p>As mentioned in our previous description of how we utilized <em>The Guardian</em> API, no citations were extracted from <em>The Guardian</em>, only <em>Nature</em> articles were used in this analysis.
After calculating the citation and mention proportion for each country, we identified countries outlying in their comparative citation or mention rate.
Outlier detection was done by subtracting the citation and mention rates, then identifying which countries were in the top or bottom 5% from each year.
We only considered countries identified as either high citation (Set C) or high mention (Set M) across all years.
We did not consider any country that was in the top and bottom 5% in different years.
Additionally, we only considered a country if cited or mentioned five times in a single year.
Once we identified the set of C and M countries, we analyzed the word frequencies in all news articles where the set C or M country was mentioned but not cited.
We believe this would provide insight into content differences between set C and M countries.
Text from articles in 2020 were not considered due to an excess of SARS-CoV-2 related terms.
Using the R package tidytext <span class="citation" data-cites="1B0FPaPWk">[<a href="#ref-1B0FPaPWk" role="doc-biblioref">32</a>]</span> we extracted tokens, removed stop words, and calculated the token frequencies across all articles.
We only consider tokens in set C or M articles if the token has been observed at least 100 times across all articles.
We then identify tokens that have the most significant ratio of usage between the two sets.
Since there are differences in the number of articles per country within each set, we calculated a token frequency within a set as the median frequency within each countries associated articles.
We calculated the resultant token ratio as the country normalized citation frequency to the country normalized mention frequency.
To avoid divide by zero errors, a pseudocount of 1 is added to both the numerator and denominator.
We assert that the term must be observed at least once in each set.</p>
<h3 id="bootstrap-estimations">Bootstrap Estimations</h3>
<p>For all analyses related to equations <a href="#eq:quote">1</a> - <a href="#eq:mention-news">8</a>, we independently selected 5000 bootstrap samples for each year.
We sampled with replacement of size equal to the cardinality of the complete set of interest.
Bootstrap estimates for equations <a href="#eq:quote">1</a> - <a href="#eq:mention-news">8</a> were performed by sampling the denominator set.
The mean, 5th, 95th quantiles across the estimates are reported as the estimated mean, lower, and upper bounds.
For the divergent word analysis, due to computational constraints, we only took 1000 bootstrap samples.
The bootstrap estimates were taken by subsampling the news articles with replacement, each time recalculating the country-normalized token frequencies within each country set (C and M).
After the normalized frequencies within each country set were calculated, we calculated the ratio between country sets for each subsample with a pseudocount of 1 in the numerator and denominator, (C+1)/(M+1).
Again, the mean, 5th, 95th quantiles across the estimates are reported as the estimated mean, lower, and upper bounds.</p>
<h2 id="results">Results</h2>
<div id="fig:fig1" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig1_tmp/fig1_main.png" style="width:6in" alt="" /><figcaption><span>Figure 1:</span> <strong>Data and Processing Pipeline Overview</strong>
Panel A, left, depicts an example news article and the type of data extracted from the text.
Orange highlighted text depicts all named entities identified as either an organization, country, state, or province by the coreNLP pipeline.
The coreNLP pipeline also extracts all quotes and associated speakers.
A custom script described in section <a href="#methods">Methods</a> identifies all citations.
Panel A, right, charts the analyses done on the extracted names and locations from news articles and papers published by <em>Nature</em>.
Panel B shows the types and amounts of articles that we have used for analyses.</figcaption>
</figure>
</div>
<h3 id="creation-of-an-annotated-news-dataset">Creation of an Annotated News Dataset</h3>
<p>We have analyzed the text of 22,001 news-related articles hosted on “www.nature.com” and 15,747 science-related articles accessible by <em>The Guardian</em> API that each span 15 years from 2005 to 2020.
For <em>Nature</em> articles our primary focus is on 16,080 articles written by journalists which include the following five article types: “Career Feature”, “News”, “News Feature”, “Technology Feature”, and “Toolbox”.
“Career Feature” generally focuses on the career-related aspects of being a scientist.
“News” and “News Feature” focuses on current events related to science as well as new scientific findings.
It should be noted that the types of articles contained in “News” changed over time which may induce content shifts in a subset of the articles within our corpus.
“Technology Feature” also covers current events and scientific findings, but additionally focuses on how science intersects with technology, such as apps, methodologies, tools, and practices.
Lastly, “Toolbox” is similar to “Technology Feature”, but is more centered on technology, especially the tools used to perform science.
We also include one analysis of the scientist-written news articles, “Career Column” and “News and Views”, as an additional set of 5,921 articles.
“Career Column” is similar to “Career Feature”, except it is not written by journalists, but individuals in the scientific field.<br />
“News and Views” is similar to a review article, where a field expert writes an article relating to a recently written article within Nature.
For <em>The Guardian</em> articles, we took all “science” section articles, which is the finest granularity available from the API to identify article types.
The articles in <em>The Guardian</em> span multiple subjects, formats, and production offices (United States, Australia, and United Kingdom)</p>
<p>The text and citations were then uniformly processed as depicted in Figure <a href="#fig:fig1">1</a>a to identify: 1) mentioned locations or organizations (light orange box), 2) quotes and quoted speakers (blue box), and 3) cited authors (green box).
Due to limitations of <em>The Guardian</em> API and their citation format, citations were only extracted for analysis in articles from <em>Nature</em>.
The extracted names from the text were used to generate three data types for downstream processing: quoted, mentioned, and cited people.
A summary of frequencies for each data type at each point of processing is provided in Tables <a href="#tbl:table1">1</a> - <a href="#tbl:table4">4</a>.
We scraped the text using the web-crawling framework Scrapy <span class="citation" data-cites="mfJiAqsK">[<a href="#ref-mfJiAqsK" role="doc-biblioref">23</a>]</span>, processed, and ran it through the coreNLP pipeline (<a href="#methods">Methods</a>).
To identify country mentions, we used the following named entities as possible mentions: “organizations”, “countries”, “states or provinces”.
We then mapped the named entity to a country prediction using OpenStreetMap <span class="citation" data-cites="1pU88qoC">[<a href="#ref-1pU88qoC" role="doc-biblioref">31</a>]</span>.
To identify quotes and speakers, we used the coreNLP quote extraction and attribution annotator.
We performed multiple name formatting processes (<a href="#methods">Methods</a>) to identify the speaker’s full name for gender and name origin prediction.
We scraped the citations using an independent scraper to the text scraper.
All identified DOI’s were queried using the <em>Springer Nature</em> API to attain all authors’ names, positions, and affiliations, however last authors were used as the primary comparator.</p>
<p>Next, we determined if the quoted speakers, mentioned countries, and cited authors in news articles have a similar demographic makeup as the scientists who publish their primary research in <em>Nature</em>.
To make this determination, we used all authors’ names, positions, and affiliations of papers published by <em>Nature</em> over the same time period (Figure <a href="#fig:fig1">1</a>a, dark orange box).
Again, last authors were used as the primary comparator.
The author metadata of <em>Nature</em> papers from 2005 to 2020 totaled 13,414.
To more broadly represent overall science authorship, we also separately analyzed 36,000 randomly selected <em>Springer Nature</em>-published papers from English-language journals over the same time.
It should be noted that extracted quotes may come from multiple types of people, such as academic scientists, clinicians, the broader scientific community, politicians, and more.
However, through anecdotal observation we believe that most sources come from either academic scientists or those actively involved in science.
The extracted author affiliations from both data sources were mapped to a country using OpenStreetMap.
Similarly, author names were uniformly processed and then used to predict both gender and name origin.</p>
<p>The top three observed article frequencies are “Research” (including “Letters” and “Articles”), “News”, and “News Feature”.
Since <em>Nature</em> merged “Letters” and “Research” papers in 2019, we combined them in our analysis.
We observed substantial variability in the number of <em>Nature</em> news articles by type between 2005 and 2020 (Figure <a href="#fig:fig1">1</a>b).
The changing classification of article types may explain temporal changes in news articles.
Over time, the frequency of “News” articles decreased; however, more specific news-related article types increased, including the introduction of the new categories “Career Feature”, “Toolbox”, and “Career Column”.</p>
<h3 id="quoted-speakers-and-primary-research-authors-in-nature-are-more-often-male">Quoted Speakers and Primary Research Authors in <em>Nature</em> are More Often Male</h3>
<div id="fig:fig2" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig2_tmp/fig2_main.png" style="width:6in" alt="" /><figcaption><span>Figure 2:</span> <strong>Predicted male speakers are overrepresented in quotes, but this depends on the article type.</strong>
Panel A, left, depicts an example of the names extracted from quoted speakers in news articles and authors in papers.
Panel A, right, highlighted the data types and processes used to analyze the predicted gender of extracted names.
Panel B shows an overview of the number of quotes extracted for each article type.
Panel C depicts three trend lines: Purple: Proportion of quotes for an estimated male speaker; Light Blue: Proportion of first author papers from an estimated male author; Dark Blue: Proportion of predicted male last authors.
We observe that the proportion of estimated male quotes is steadily decreasing, most notably from 2017 onward.
This decreasing trend is not due to a change in quotes from the first or last authors, as observed in Panel D.
Panel D shows a consistent but slight shift towards quoting the last author of a cited article than the first author.
Instead, the observed downward trend of male quotes coincides with additional article types introduced in 2017.
Panel E depicts the frequency of quote by article type highlighting an increase in quotes from “Career Feature” articles.
Panel E depicts that the quotes obtained in this article type have reached parity.
The colored bands represent a 5th and 95th bootstrap quantiles in all plots, and the point is the mean calculated from 5,000 bootstrap samples.</figcaption>
</figure>
</div>
<p>To quantify and compare the gender demographic of quoted people and authors, we analyzed their names.
While we could have analyzed the proportion of unique male speakers, we were interested in measuring the overall participation rates by gender and analyzed the proportion of total quotes, e.g. a single speaker may have more than one quote in an article.
Furthermore, we assume that a majority of quoted speakers are typically involved in scientific research and therefore primary research authors is a comparable demographic.
Figure <a href="#fig:fig2">2</a> shows an overview of the process and example input data for this analysis: 1) quotes and quoted speakers (blue box), 2) first and last authors’ names of papers published by <em>Nature</em> (dark orange box).
These analyses relied upon accurate gender prediction of both authors and speakers.
To predict the gender of the speaker or author, we used the package genderizeR <span class="citation" data-cites="cLM5pKQN">[<a href="#ref-cLM5pKQN" role="doc-biblioref">27</a>]</span>, an R package wrapper to access the genderize.io API <span class="citation" data-cites="15Jxi2IvD">[<a href="#ref-15Jxi2IvD" role="doc-biblioref">28</a>]</span> to get binary gender predictions for each identified first name.
We unfortunately cannot identify non-binary gender expression with the tools we used.
Performance of binary prediction was evaluated on a benchmark data set of thirty randomly selected news articles, ten from each of the following years: 2005, 2010, 2015 (Figure <a href="#fig:suppfig1">Supplemental 1</a>a).</p>
<!-- CUT WAS SUGGESTED BY ANGELA To identify our binary gender prediction error rate, we created a benchmark data set of thirty randomly selected news articles; ten from each of the following years: 2005, 2010, 2015 .
In these articles, we hand-annotated the quoted speakers and their assumed gender. HOW WAS THIS DONE NEED MORE SPECIFIC
We then compared our hand-annotated gender prediction against the gender prediction after the entire scraping, coreNLP quote annotator, and genderizeR pipeline.
Using our hand-annotated prediction as ground truth, we correctly predicted a total of 42/55 female and 157/162 male names within the benchmark articles.
We found that the gender prediction had an accuracy of 0.914, with a Kappa statistic of 0.767 (Figure {@fig:suppfig1}a).
After establishing a reasonable accuracy for gender prediction, we determined the rate of gendered quotes within articles.
!-->
<p>We first examined the number of quotes identified within each type of science-news article (Figure <a href="#fig:fig2">2</a>b), totaling 177,134 quotes with 157,955 of them containing a gender prediction for the speaker.
Quote frequencies vary by article type.
We compared the number of quotes from predicted male people to the number of predicted male first and last authors published in <em>Nature</em>.
The total number of authors with a gender prediction were 10,454 first authors and 10,488 last authors.
As denoted by the red line, we found that the predicted genders of authors and source-quotes were far from gender parity (Figure <a href="#fig:fig2">2</a>c).
Additionally, we observed a difference in the predicted genders between first and last authors, with the last authors more frequently predicted to be male.</p>
<p>To extend our analysis to primary research authors more broadly, we also examined a random selection of authors from English language journals published by <em>Springer Nature</em> (Figure <a href="#fig:suppfig2">Supplemental 2</a>a).
The predicted gender gap between first and last authors was larger in our selection of <em>Springer Nature</em> papers; however, both first and last authors were predicted to be closer to parity than for <em>Nature</em> authors.
Overall, predicted male people were more frequently quoted than predicted female people in <em>Nature</em> news articles and first and last authors in <em>Nature</em> and <em>Springer Nature</em> papers over the same time period.</p>
<p>The gender proportions of authorship were relatively stable over time for both <em>Nature</em> and <em>Springer Nature</em> papers.
In contrast, we found that the rate of quotes predicted to be from male people noticeably decreased over time, however at different rates between <em>The Guardian</em> and <em>Nature</em>.
For <em>Nature</em> in 2005, the fraction of quotes predicted to be from male people was 87.09% (5,291/6,075) whereas in 2020 it was 68.86% (2,870/4,168).
In contrast <em>The Guardian</em> is decreasing at a slower rate in comparison to <em>Nature</em>, in 2005 the fraction of quotes predicted to be from male people was 84.01% (3,331/3,965) and 75.94% (2,273/2,993) in 2020.
Indeed, the fraction of quotes from <em>Nature</em> of predicted male people was initially higher than the fraction of predicted male last authors and quotes from <em>The Guardian</em>, then slowly decreased until it was below the predicted male first and last authorship rates in 2020.
We identified that a large decrease occured in <em>Nature</em> between 2017 and 2018.
We explored the possible reasons for this decrease.
First, we looked at the authorship position of speakers who were quoted about their published paper (Figure <a href="#fig:fig2">2</a>d).
We identified 8,064 quotes with an associated citation (3,382 first author and 4,682 last author quotes).
We found that quotes trend slightly towards last authors from 2005 to 2020, but because the fraction of predicted male last authors remained stable over time both for <em>Nature</em> and the selection of <em>Springer Nature</em> papers, which likely does not explain the downward trend.
We then analyzed the breakdown of gender predicted quotes by article type.
Interestingly, one article type, “Career Feature”, achieved gender parity in its quotes (Figure <a href="#fig:fig2">2</a>e and Figure <a href="#fig:suppfig2">Supplemental 2</a>b).
In this article type, we identified a total of 898 quotes (449 predicted female and 449 predicted male quotes), which substantially pulled the overall quote gender ratio closer to parity from 2018 onward.</p>
<h3 id="predicted-celtic-english-name-origins-are-over-enriched-in-cited-and-quoted-people-while-predicted-east-asian-name-origins-are-under-enriched">Predicted Celtic English Name Origins are over-enriched in cited and quoted people, while predicted East Asian name origins are under-enriched</h3>
<div id="fig:fig3" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig3_tmp/fig3_main.png" style="width:6in" alt="" /><figcaption><span>Figure 3:</span> <strong>Analysis of Quotes and Citations found Over-representation of Celtic/English and under-representation of East Asian predicted name origins.</strong>
Panel A, left, depicts an example of the names extracted from quoted speakers and citations found within news articles and authors in papers.
Panel A, right, highlights the data types and processes used to analyze the predicted origin of extracted names. Panels B and C depict a comparison between the predicted name origins of last authors in <em>Nature</em> and cited papers in the news.
Panel B and C differ in the news article types.
Panel B calculates the predicted name origin proportion using only journalist-written articles, whereas Panel C only uses scientist-written articles.
The distinction between journalist- and scientist-written articles only exists in the <em>Nature</em> corpus, all articles are assumed to be written by a journalist in <em>The Guardian</em>.
Similarly, Panels D and E depict two possible trend lines, comparing predicted name origins of either quoted or mentioned people against name origins of last authors of <em>Nature</em> research papers.
<!-- REMOVE CONCLUSION FROM CAPTION We found that Celtic/English name origins are overrepresented in quotes, and to a smaller degree in citations, when compared to name origins of last authors.
Furthermore, East Asian name origins are underrepresented in quotes and citations when compared to name origins of last authors, however it was much particularly for citations of non-journalist-written articles versus journalist-written articles.
Additional information for the cited, quoted, and mentioned people are provided in (Figure {@fig:suppfig3} and {@fig:suppfig4}).
Furthermore, we recapitulate this finding when comparing against an additional background of _Springer Nature_ published last authors (Figure {@fig:suppfig3}) -->.</figcaption>
</figure>
</div>
<p>To identify possible disparities with respect to name origin, we again used the extracted names of quoted speakers from <em>Nature</em> and <em>The Guardian</em> news articles and last authors of published papers in <em>Nature</em>.
In addition, we also identified the last authors of all papers cited by a <em>Nature</em> news article.
All processed names were then input into Wiki2019-LSTM and assigned one of ten possible name origins (<a href="#methods">Methods</a>).
Figure <a href="#fig:fig3">3</a>a shows an overview of the process and example input data for this analysis: 1) quotes and quoted speakers (blue box), 2) names of cited last authors in news articles (green) 3) last authors’ names of papers published by <em>Nature</em> (dark orange box).
We divided our analysis into three parts: firstly, quantifying the proportions of predicted name origins of last authors cited in <em>Nature</em> news articles.
Secondly, calculating the proportion of quotes from speakers with a predicted name origin.
Thirdly, calculating the proportion of unique names mentioned within an article with a predicted name origin.
As a comparator set, we again used the last author names in <em>Nature</em> papers for all three analyses.
Additionally, in our supplemental analyses, we compared against the last authorship in a random selection of <em>Springer Nature</em> papers.
We found that the number of quotes and unique names mentioned dramatically outnumbered the number of cited authors in <em>Nature</em> news articles, as well as last authors within <em>Nature</em> papers (Figure <a href="#fig:suppfig3">Supplemental 3</a>a).
Still, since we have more than one hundred observations per time point for each data type, we believe this is sufficient for our analysis.
Minimum and median per data type over all years: <em>Nature</em> papers, (565, 679); <em>Springer Nature</em> papers, (1298, 1684); <em>Nature</em> quotes, (3751, 5662); <em>Nature</em> mentions, (3177, 4726); <em>The Guardian</em> quotes, (2240, 2898); <em>The Guardian</em> mentions, (2192, 3271); citations in journalist-written <em>Nature</em> article, (139, 267) citations in a scientist-written <em>Nature</em> article, (503, 660).</p>
<p>In comparing the citation rate of last author name origins in news articles, we decided to additionally analyze scientist-written articles.
Since no citations were able to be easily extracted from <em>The Guardian</em> articles, the citation analysis was performed only on <em>Nature</em> articles.
Though fewer in number, scientist-written news articles have many citations, making the set sufficient for analysis and providing an opportunity to measure differences in citation patterns between journalists and scientists.
In both journalist- and scientist-written articles, we found that most cited name origins were predicted Celtic/English or European, both with a bootstrapped estimated citation rate between 24.8-43.0% (Figure <a href="#fig:suppfig3">Supplemental 3</a>b,c).
East Asian predicted name origins are the third highest proportion of cited names, with a bootstrapped estimated citation rate between 5.7-24.8%.
All other predicted name origins individually account for less than 9% of total cited authors.</p>
<p>We determined how these distributions compare to the composition of the last authors in <em>Nature</em>, by examining the top three most frequent predicted name origins (Figure <a href="#fig:fig3">3</a>b,c).
We found a slight over-enrichment for predicted Celtic/English name origins and a small under-enrichment for predicted East Asian name origins in scientist-written and journalist-written news articles when compared to the composition of last authors in <em>Nature</em> (Figure <a href="#fig:fig3">3</a>b, c).
Interestingly, the under-enrichment for predicted East Asian name origins in journalist-written articles was only from 2005 to 2009.
Furthermore, we found no substantial difference for European or other predicted name origins (Figure <a href="#fig:suppfig4">Supplemental 4</a>a).
However, we did observe that papers in which the last author had European predicted name origins were more highly cited in news articles written by scientists than journalists (Figure <a href="#fig:suppfig4">Supplemental 4</a>4b,c).
We also observed the predicted Celtic/English over-enrichment and East Asian under-representation when considering our subset of <em>Springer Nature</em> papers (Figure <a href="#fig:suppfig4">Supplemental 4</a>b) for both journalist- and scientist-written news articles.
In contrast to <em>Nature</em>, in the <em>Springer Nature</em> set, we see a difference in predicted European name origins, with a growing over-enrichment.
Additionally, we see a difference in predicted Arabic/Turkish/Persian name origins frequencies between cited authors and <em>Springer Nature</em> authors, however the absolute difference is lower than observed for Celtic/English and East Asian predicted name origins.</p>
<p>We then sought to determine whether or not the quoted speaker demographic replicated the cited authors’ over- and under-enrichment patterns using articles from <em>The Guardian</em> and <em>Nature</em>.
We found a much stronger Celtic/English over-enrichment in comparison to citation patterns, with quotes from those with Celtic/English name origins at a much higher frequency than quotes from those with European name origins (Figure <a href="#fig:suppfig3">Supplemental 3</a>d).
Furthermore, we also found that the Celtic/English over-enrichment was much stronger in <em>The Guardian</em> than in <em>Nature</em>.
We also found a much stronger depletion of quotes from people with predicted East Asian name origins (Figure <a href="#fig:suppfig3">Supplemental 3</a>b), with never more than 7.4% and 4.9% of quotes in <em>Nature</em> and <em>The Guardian</em>, respectively (Figure <a href="#fig:fig3">3</a>d).
This reveals a large disparity when considering that people with a predicted East Asian name origin constitute between 5.7-24.8% of last authors cited in either journalist- or scientist-written news articles (Figure <a href="#fig:fig3">3</a>b,c).
When we again compare <em>Nature</em> articles against last authorship in <em>Nature</em>, we observe patterns consistent with the citation analysis with all predicted name origins, except for East Asian and Celtic/English closely matching the predicted name origin rate of last authors in <em>Nature</em> (Figure <a href="#fig:suppfig4">Supplemental 4</a>c, dark grey and purple lines).
We find a similar pattern when we consider <em>The Guardian</em> articles, except we additionally find a depletion of predicted European name origins (Figure <a href="#fig:suppfig4">Supplemental 4</a>c, dark grey and light grey lines).</p>
<p>When comparing <em>Nature</em> articles against the <em>Springer Nature</em> set of last authors, we again find the same patterns in quoted speakers with East Asian, Celtic/English, and Arabic/Turkish/Persian predicted name origins when comparing against the as we did in the previous citation analysis (Figure <a href="#fig:suppfig4">Supplemental 4</a>d, green and purple lines).
Again, when considering <em>The Guardian</em> articles, we find a depletion of predicted European name origins (Figure <a href="#fig:suppfig4">Supplemental 4</a>c, green and light grey lines).
In addition, we find an under-enrichment of predicted Hispanic, South Asian, and Hebrew name origins when comparing against the predicted name origin rate of last authors in our <em>Springer Nature</em> set.</p>
<p>Since many journalists use additional sources that are not directly quoted, we also also analyzed likely paraphrased speakers, e.g. a case in which the person was a source and mentioned in the story but not directly quoted.
To do this, we identified all unique names that appeared in an article, which we term <em>mentions</em>.
We found the same pattern of over-enrichment for predicted Celtic/English name origins and under-enrichment for East Asian name origins when comparing against both <em>Nature</em> and <em>Springer Nature</em> last authorships (Figure <a href="#fig:fig3">3</a>e, Figure <a href="#fig:suppfig3">Supplemental 3</a>d,e, Figure <a href="#fig:suppfig4">Supplemental 4</a>e,f).</p>
<h3 id="content-of-science-coverage-differs-between-countries">Content of Science Coverage Differs between Countries</h3>
<div id="fig:fig4" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig4_tmp/fig4_main.png" style="width:6in" alt="" /><figcaption><span>Figure 4:</span> <strong>Type of country representation in news articles differ across countries</strong>
Panel A, left, depicts an example of the country mentions extracted from news article text, citations found within news articles, and author affiliations in papers.
Panel A, right, highlights the data types and processes used to analyze the countries cited or mentioned.
Panel B depicts the citation rate of the top ten most-cited countries over time.
Panel C depicts the citation rate of the top three most-cited countries (yellow) compared to that countries citation rate within <em>Nature</em>, as measured by author affiliation (grey).
Panel D is a heatmap depicting the yearly difference in citation and mention rate for a specific country.
We only depict countries with a consistent and large difference across all years.
Each cell contains the difference between citation and mention rates, with red denoting the lower difference between mention and citation and green a more considerable difference.
The left annotation bar titled “median_M_C” is the median difference across all observed years.
The “Class” annotation column denotes the binarized set definition of each country, either “Cited” or “Mentioned”.
Panel E shows the top 15 words extracted from articles mentioning the countries depicted in Panel D, with the largest proportional frequency between the two defined country sets.
The width of the bar depicts the log10(Frequency in Mentions +1 / Frequency of Citations +1).</figcaption>
</figure>
</div>
<p>After finding name origin differences between cited and quoted people in comparison to last authorship rates, we wanted to determine if news articles 1) represent countries at different rates, or 2) vary in the language used to describe scientific content related to each country.
To perform this analysis, we used three sources of information: 1) country-related entities mentioned in the news article text (light orange), 2) country affiliations of cited authors in news articles (green), 3) country affiliation of authors in <em>Nature</em> and <em>Springer Nature</em> (dark orange).
Figure <a href="#fig:fig4">4</a>a shows example input data and a schematic of the analysis.
We provide further processing details in <a href="#methods">Methods</a>.</p>
<p>First, we interrogated the country affiliations of cited authors.
We assigned an affiliation to a paper if any author, not only first or last, has affiliation with a specific country.
Therefore a single paper may have multiple country affiliations.
It was not possible to only identify country affiliations for a specific author position due to limitations in the <em>Springer Nature</em> API.
Affiliation query results from the <em>Springer Nature</em> API return all country affiliations for a specific paper and are not linked to one particular author.</p>
<p>After post-processing, we analyzed a total of 1,989 papers with a citation accessible through the <em>Springer Nature</em> API.
We considered all authors, not only first or last, within the article and their affiliations for this analysis.
We found that most cited papers have at least one author with an affiliation within the United States, followed by the United Kingdom, Germany, and France (Figure <a href="#fig:fig4">4</a>b).
Interestingly, we found a strong citation over-enrichment of many top-cited countries, but we found no evidence of under-enrichment of countries included in NamePrisms’ grouping of countries with East Asian name origins (Figure <a href="#fig:fig4">4</a>c, Figure <a href="#fig:suppfig5">Supplemental 5</a>a).</p>
<p>Next, we examined content differences between countries or groups of countries.
For example, we wanted to determine the extent to which a country was the subject (i.e., their scientific policies, environment, pollution) or the research being performed within that country was the subject.
To do this, we needed to identify in an article when a country is mentioned and an affiliated author from that country is cited.
Our assumption is that if a country is not cited, but it is talked about, then the topic of the article is related to something happening within that country.
Similarly, if a country is not mentioned, but has an affiliated author that is cited, then the science output from that country is likely to be the subject of the article.
We quantified this by counting all the journalist-written news articles in which a country, region within a country, or organization affiliated with a country was mentioned, which we term a country’s “mention rate”.
To identify if a country was mentioned in an article, we started with all organizations, countries, states, or provinces identified by coreNLP’s named entity tagger.
We then linked all the identified region-related named entities to countries with OpenStreetMap.
Since there may be errors in both coreNLP and OpenStreetMap, we only assumed a country was mentioned when at least two unique entities mapped to the same country in a single article.
On a benchmark set, we found that 4 country identifications from a total of 59 country predictions were incorrect (Figure <a href="#fig:suppfig1">Supplemental 1</a>b,c).
When aggregating over articles, we find that 4/30 articles contain exactly one incorrect country mention (Figure <a href="#fig:suppfig1">Supplemental 1</a>b)</p>
<p>Once we calculated the mention rate and used the previously described citation rate, we identified countries with a consistent skew towards either a higher or lower mention to citation rate (Figure <a href="#fig:fig4">4</a>d and Figure <a href="#fig:suppfig4">Supplemental 4</a>b).
This is defined as countries where the difference between citation and mention rates is in the top or bottom 5% per year.
This outlier description allowed us to identify two sets of countries based on their citation and mention rates.
Those with a high relative citation to mention rate were: Germany, Spain, Netherlands, Denmark, Sweden, Austria, Switzerland, Israel, and Belgium.
Those with a low relative citation to mention rate were: Russia, Brazil, Colombia, the United States, and India.
We removed all countries that were in both the top or bottom 5% in different years, which excluded Australia, Canada, the United Kingdom, China, France, and Japan from consideration.</p>
<p>We then identified content differences between these two sets of countries by analyzing all of the main text from articles that mentioned and did not cite an author affiliated with each of the specified countries.
After properly identifying high-frequency words across the entire corpus, we identified the top 15 most discriminative terms of each country type (<a href="#methods">Methods</a>).
Interestingly, we identified that the words most linked with mentioned countries were mostly related to environmental, extractive or political topics.
The top 5 terms were “dams”, “rio”, “shuttle”, “hydropower”, and “weapons” (Figure <a href="#fig:fig4">4</a>e, Figure <a href="#fig:suppfig4">Supplemental 4</a>c,d).
In contrast, we find that the words most related to countries with a higher citation than mention rate were science or research-related ones.
The top five terms were “classical”, “quantum”, “yeast”, “neurons”, and “cells”.</p>
<h2 id="discussion">Discussion</h2>
<p>Scientific journalism is the critical conduit between the academic and public spheres, and consequently shapes the public’s view of science and scientists.
However, as observed in other forms of recognition in science, biases may shift coverage away from the known demographics within science <span class="citation" data-cites="b1Ltmp3Z">[<a href="#ref-b1Ltmp3Z" role="doc-biblioref">29</a>]</span>.
Ideally, scientific journalism is representative of academic papers.
Though it would be best for news coverage to promote equitable representation, at a minimum quotes and citations would ideally match the regional and gender demographics of scientific academia.
To examine this last point, we analyzed over 37,000 news articles published in two disparate news outlets, <em>Nature</em> and <em>The Guardian</em>, to identify quoted, mentioned, and cited people.
We then compared this to the authorship statistics from <em>Nature</em>’s papers and a subset of <em>Springer Nature</em>’s English language papers.</p>
<p>We first looked at possible gender differences in quotes and found in both news outlets, a large, but decreasing, gender gap when compared to the broader population in all but one article type.
We found that the decreasing trend in <em>Nature</em> articles was largely driven by the recent introduction of a single column, “Career Feature”.
This column has an equal number of quotes from both genders, showing that gender parity is possible in science journalism.
However, we do recognize that different journalistic columns have different purposes or may represent different demographics and be inherently more difficult to reach parity.
In order to draw these conclusions, we analyzed the proportion of all identified quotes that were from a speaker predicted to be male compared to the proportion of first and last authors in <em>Nature</em> predicted to be male, which similarly is a measure of scientific participation.
Using computational methods, we performed quote association and gender prediction.
We observed a strong skew towards predicted male participation across both quotes within news articles and authorship within <em>Nature</em> and <em>Springer Nature</em> papers.
We also identify a gender differences between first and last authors, as previously shown <span class="citation" data-cites="r5fYhK24 zp6LSf5E xqtsOPGC">[<a href="#ref-r5fYhK24" role="doc-biblioref">33</a>,<a href="#ref-zp6LSf5E" role="doc-biblioref">34</a>,<a href="#ref-xqtsOPGC" role="doc-biblioref">35</a>]</span>.</p>
<p>To further our analysis of possible coverage disparities, we looked to differences in predicted name origins of quoted and cited last authors across all the processed news articles.
Our findings provide additional support for previous studies that identified under-citation <span class="citation" data-cites="MpfuFcH2">[<a href="#ref-MpfuFcH2" role="doc-biblioref">36</a>]</span> and under-recognition <span class="citation" data-cites="b1Ltmp3Z">[<a href="#ref-b1Ltmp3Z" role="doc-biblioref">29</a>]</span> of East Asian people.
Interestingly, we found under-citation of people with predicted East Asian name origins to be much less pronounced than under-quotation.
We do not believe that the under-quotation is driven by paraphrasing sources, which may occur more frequently with non-native English speakers.
This is because our findings of under-enrichment of predicted East Asian name origins was recapitulated when we additionally looked at unique names mentioned within news articles.
Furthermore, we find that scientist-written news articles tend to under-cite people with predicted East Asian name origins more than journalist-written articles.
Our finding of under-quotation of people with predicted East Asian name origin was also recapitulated when we additionally looked at unique names mentioned within news articles.
Overall, we find that most quotes, mentions, and citations are from people with predicted Celtic/English or European name origins, followed by East Asian, with the remaining origins individually making up less than 10% of both citations or quotes.
When considering <em>Nature</em> news articles, all predicted name origins roughly match the expected background rate estimated by <em>Nature</em> last authorship, except Celtic/English (over-representation) and East Asian (under-representation).
When considerng <em>The Guardian</em> articles, we additionally find a under-representation of predicted European names.
We also found this same pattern for both <em>Nature</em> and <em>The Guardian</em> when comparing against our <em>Springer Nature</em> data set.</p>
<p>After observing name origin differences, we determined if there was a difference in the frequency or content of coverage across countries.
We first looked at possible citation disparities for cited authors with specific country affiliations, and found that most papers cited by <em>Nature</em> news articles have at least one author affiliated with the United States, United Kingdom, or Germany.
In contrast to the name origins results, the citation rate of Chinese affiliated authors was not significantly depleted.
Interestingly, we find the number of paper citations with authors having affiliations in China is increasing at the same rate as <em>Springer Nature</em> and <em>Nature</em> authorships.
Furthermore, the increased citation and last authorship rates of Chinese affiliated authors is most pronounced in comparison to all other countries within the top ten most cited.</p>
<p>We then focused on identifying whether the news content about a country focused on the scientific output from that country or the country itself as the scientific subject.
We postulated that a difference in citation and mention rates could indicate the difference in a news article’s subject matter.
To achieve this, we identified two sets of countries with a large and consistent difference in their citation and mention rates.
The top “Citation” countries were Germany, Spain, and the Netherlands.
The top “Mention” countries were India, the United States, and Colombia.
We then found that these two sets of countries were discussed differently.
The resultant words for “Mention” countries were most related to extraction, agriculture and politics, suggesting that the country was likely the article’s subject.
In contrast, the representative words for “Citation” countries were more diverse in topic, relating to biological, medical, and physics terms.
We hypothesize that the difference in discriminative terms between the two country sets is evidence that the news content may focus more on research of a country as a subject than science that comes out of it.
This hypothesis assumes that no country has a specialization in a scientific topic, which is likely not true.
This does, however, give us an indication that countries differ in their scientific journalism.</p>
<p>Through our comprehensive analysis, we were able to identify how news coverage varies by country, name origin, and gender, and compare it to scientific publishing background rates.
While we found a significant gender disparity, the rate of female representation in scientific news is increasing and outpacing first and last authorships on scientific papers.
Furthermore, we identified a significant depletion of quotes from scientists with a predicted East Asian name origin when compared to paper authorship, and a significant but smaller depletion of cited authors with a predicted East Asian name origin in news content.
Finally, we showed that coverage of specific countries differ in content, with the country’s scientific output being put in a more significant focus for some countries than the environmental aspects of other countries.</p>
<p>Previous anecdotal studies from journalists have shown that awareness of their bias can help them to reduce it <span class="citation" data-cites="CR5YHhw8 gud4dlat soMuDIhH">[<a href="#ref-CR5YHhw8" role="doc-biblioref">2</a>,<a href="#ref-gud4dlat" role="doc-biblioref">3</a>,<a href="#ref-soMuDIhH" role="doc-biblioref">4</a>]</span>.
Once a bias is identified an individual can seek resources to help them find and retain diverse sources, such as utilizing international expert databases like gage <span class="citation" data-cites="TPNkhIbZ">[<a href="#ref-TPNkhIbZ" role="doc-biblioref">21</a>]</span> and SheSource <span class="citation" data-cites="1CFcA44h9">[<a href="#ref-1CFcA44h9" role="doc-biblioref">22</a>]</span>.
Additional tips for journalists to achieve and maintain a diverse source pool is described by Christina Selby in the Open Notebook <span class="citation" data-cites="11fb3ccQ4">[<a href="#ref-11fb3ccQ4" role="doc-biblioref">20</a>]</span>.</p>
<p>It should also be mentioned that we were only able to analyze the data provided through either scraping “www.nature.com” or accessing <em>The Guardian</em> open platform API.
This is a major limitation, because the only measures that we have of demographics of sources are people who have their name mentioned or research cited within the article.
Journalists do not quote or mention all of the sources that they interviewed or cite all of the papers that they read when researching an article.
For example, a person may not be mentioned or quoted in the article because of length limitations, because they do not want to be named, or if they provide information that is not directly quotable but that still shapes the content of the article.
A more accurate reflection of journalists’ sources would be a self-maintained record of people they interview.
Our work examines disparities with respect to recognition within articles, which can be measured by mentions, quotes, or citations of people.</p>
<p>Furthermore, many journalists are limited by who responds to their requests for an interview or recommendations from prominent scientists.
Scientists fielding reporter inquiries can also audit themselves to examine the extent to which there are disparities in the sets of experts they recommend.
<!-- CUT Furthermore, since news coverage is accountable to their readership, it presents the opportunity to represent scientific perspectives that are more diverse than observed in academic publishing. 
Through the use of one measure of source demographics, we have shown that gender parity can be achieved in at least one column type, as observed by the gender parity in quotes from the "Career Features" column.!-->
Journalists and the scientists they interview have a unique opportunity to shape the public and their peers’ perspectives on who is a scientific expert.
Their choice of coverage topics and interviewees could help to reduce disparities in the outputs of science-related journalism.</p>
<h3 id="data-and-resource-availability">Data and Resource availability</h3>
<p>This manuscript was written using Manubot <span class="citation" data-cites="YuJbg3zO">[<a href="#ref-YuJbg3zO" role="doc-biblioref">37</a>]</span> and is available on github: <a href="https://github.com/greenelab/nature_news_manuscript">manuscript repository link</a>.
All code and metadata is also available on github, <a href="https://github.com/greenelab/nature_news_disparities">full analysis repository link</a>, under a BSD 3-Clause License.
The code to generate all main and supplemental figures are available as R markdown documents within our main analysis github, in the following subfolder: <a href="https://github.com/greenelab/nature_news_disparities/tree/main/figure_notebooks">notebooks</a>.
Due to copyright, we are unable to provide the scraped data used in this analysis.
However, scraping code is available on our main analysis github, in the following subfolder: <a href="https://github.com/greenelab/nature_news_disparities/tree/main/nature_news_scraper">scraper</a>.
To ensure reproducability without violating copyright, we provide the word frequencies for each news article and the coreNLP output.
Furthermore, we provide a docker image that can re-run the analysis pipeline using intermediate, pre-processed data and produce all the main and supplemental figures.
To re-run the entire pipeline (including scraping), the docker image contains all necessary packages and code.
The shell scripts to re-run the entire analysis are provided in the README file in the github repository.</p>
<h3 id="acknowledgements">Acknowledgements</h3>
<p>We would like to thank Jeffrey Perkel for asking thoughtful questions that spurred this line of research, and providing feedback and insight into the news-gathering process during the course of this project.</p>
<h2 class="page_break_before" id="supplemental-figures">Supplemental Figures</h2>
<div id="fig:suppfig1" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/supp_fig1_tmp/supp_fig1.png" data-tag="Supplemental 1" style="width:6in" alt="" /><figcaption><span>Figure Supplemental 1:</span> <strong>Benchmark Data </strong>
Panel A, depicts the performance of gender prediction for pipeline-identified quoted speakers.
Panel B is a histogram of the number of articles that were falsely identified to mention a country by our processing pipeline.
Panels C shows the estimated versus true frequency of country mentions within our benchmark dataset. The red line denotes the x = y line.</figcaption>
</figure>
</div>
<div id="fig:suppfig2" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig2_tmp/fig2_supp.png" data-tag="Supplemental 2" style="width:6in" alt="" /><figcaption><span>Figure Supplemental 2:</span> <strong>Predicted male speakers are overrepresented in news quotes when compared against <em>Springer Nature</em> authorship</strong>
Panel A depicts three trend lines: Purple: Proportion of <em>Nature</em> quotes for an estimated male speaker; Light Grey: Proportion of <em>The Guardian</em> quotes for an estimated male speaker; Yellow: Proportion of first author articles from an estimated male author in <em>Springer Nature</em>; Dark Mustard: Proportion of last author articles from an estimated male author in <em>Springer Nature</em>.
We observe a larger gender difference between first and last authors in <em>Springer Nature</em> articles, however the proportion of predicted male speakers is less than observed in <em>Nature</em> research articles.
Panel B depicts the proportion of male quotes broken down by article type.
In all plots the colored bands represent the 5th and 95th bootstrap quantiles and the point is the mean calculated from 5,000 bootstrap samples.</figcaption>
</figure>
</div>
<div id="fig:suppfig3" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig3_tmp/fig3_supp.png" data-tag="Supplemental 3" style="width:6in" alt="" /><figcaption><span>Figure Supplemental 3:</span> <strong>Predicted Celtic/English, and European name origins are the highest cited, quoted, and mentioned</strong>
Panel A, depicts the number of quotes, mentions, citations, or research articles considered in the name origin analysis.
Panels B-E depicts the proportion of a name origin in a given dataset, citations in articles written by journalists or writers, quoted speakers or mentions.
In all plots the colored bands represent the 5th and 95th bootstrap quantiles and the point is the mean calculated from 5,000 bootstrap samples.</figcaption>
</figure>
</div>
<div id="fig:suppfig4" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig3_tmp/fig3_supp2.png" data-tag="Supplemental 4" style="width:6in" alt="" /><figcaption><span>Figure Supplemental 4:</span> <strong>Over-representation of predicted Celtic/English and under-representation of East Asian name origins is also found in <em>Nature</em> and <em>Springer Nature</em> articles</strong>
Panels A-F depicts ten plots, each for a possible name origin comparison against a background set.
Panel A, C, and E compare the citation (a), quote (c), or mention (e) rate against <em>Nature</em> last author name origins.
Panel B, D, and F compare the citation (a), quote (c), or mention (e) rate against <em>Springer Nature</em> last author name origins.
Panels A and B additionally partition the citation rates calculated into two sets, journalist-written articles (salmon) and scientist-written articles (mint green).
Only Panels C-F contain information from both <em>Nature</em> and <em>The Guardian</em>, since no citations were extracted from <em>The Guardian</em> articles.
For C-F, only journalist written articles are considered.</figcaption>
</figure>
</div>
<div id="fig:suppfig5" class="fignos">
<figure>
<img src="https://github.com/nrosed/nature_news_disparities/raw/main/figure_notebooks/tmp_files/fig4_tmp/fig4_supp.png" data-tag="Supplemental 5" style="width:6in" alt="" /><figcaption><span>Figure Supplemental 5:</span> <strong>Analysis of Country representation</strong>
Panel A, depicts the citation rate for the top ten most cited articles by <em>Nature</em> news.
Each plot is a comparison between the citation rate (yellow), <em>Nature</em> author affiliation (grey), and <em>Springer Nature</em> author affiliations (dark mustard).
Panel B depicts the top and bottom 5% of (mention rate - citation rate).
Each point represents a country - year pair.
Blue points are a country that is further considered to be a “Citation” or “Mention” country.
Panel C and D show the overall word frequencies of the 15 words with the largest ratio of frequencies between “Citation” (panel C) and “Mention” (panel D) countries.</figcaption>
</figure>
</div>
<div id="tbl:table1" class="tablenos">
<table>
<caption><span>Table 1:</span> Breakdown of quotes at major processing steps </caption>
<thead>
<tr class="header">
<th>Processing Step</th>
<th>Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Total Quotes</td>
<td>201857</td>
</tr>
<tr class="even">
<td>Quotes with a full name or pronoun associated</td>
<td>180316</td>
</tr>
<tr class="odd">
<td>Quotes with a gender prediction</td>
<td>179967</td>
</tr>
<tr class="even">
<td>Quote with a full name</td>
<td>161066</td>
</tr>
<tr class="odd">
<td>Quotes with a name origin prediction</td>
<td>159018</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:table2" class="tablenos">
<table>
<caption><span>Table 2:</span> Breakdown of citations at major processing steps </caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 7%" />
<col style="width: 12%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Writer of Article</th>
<th style="text-align: right;">Total citations</th>
<th style="text-align: right;">Total Springer Nature citations</th>
<th style="text-align: right;">First author citations with a full name</th>
<th style="text-align: right;">Last author citations with a full name</th>
<th style="text-align: right;">First author citations with a name origin prediciton</th>
<th style="text-align: right;">Last author citations with a name origin prediciton</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Journalist</td>
<td style="text-align: right;">15713</td>
<td style="text-align: right;">5736</td>
<td style="text-align: right;">4405</td>
<td style="text-align: right;">4423</td>
<td style="text-align: right;">4402</td>
<td style="text-align: right;">4406</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scientist</td>
<td style="text-align: right;">40707</td>
<td style="text-align: right;">14597</td>
<td style="text-align: right;">11151</td>
<td style="text-align: right;">11083</td>
<td style="text-align: right;">11151</td>
<td style="text-align: right;">11065</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:table3" class="tablenos">
<table>
<caption><span>Table 3:</span> Breakdown of all Springer Nature papers at major processing steps </caption>
<colgroup>
<col style="width: 71%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Processing Step</th>
<th style="text-align: right;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"># Springer Nature Articles</td>
<td style="text-align: right;">38400</td>
</tr>
<tr class="even">
<td style="text-align: left;"># First + last authors with a full name in Springer Nature Articles</td>
<td style="text-align: right;">54509</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># First + last authors with a gender prediction in Springer Nature Articles</td>
<td style="text-align: right;">50877</td>
</tr>
<tr class="even">
<td style="text-align: left;"># First + last authors with a name origin prediction in Springer Nature Articles</td>
<td style="text-align: right;">54358</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:table4" class="tablenos">
<table>
<caption><span>Table 4:</span> Breakdown of all Nature papers at major processing steps </caption>
<colgroup>
<col style="width: 69%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Processing Step</th>
<th style="text-align: right;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"># Nature Articles</td>
<td style="text-align: right;">13414</td>
</tr>
<tr class="even">
<td style="text-align: left;"># First + last authors with a full name in Nature Articles</td>
<td style="text-align: right;">21765</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># First + last authors with a gender prediction in Nature Articles</td>
<td style="text-align: right;">20942</td>
</tr>
<tr class="even">
<td style="text-align: left;"># First + last authors with a name origin prediction in Nature Articles</td>
<td style="text-align: right;">21765</td>
</tr>
</tbody>
</table>
</div>
<h2 class="page_break_before" id="references">References</h2>
<!-- Explicitly insert bibliography here -->
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-9uN0d5DN">
<p>1. <strong>The enduring whiteness of the American media | Howard French</strong> <br />
the Guardian<br />
(2016-05-25) <a href="http://www.theguardian.com/world/2016/may/25/enduring-whiteness-of-american-journalism">http://www.theguardian.com/world/2016/may/25/enduring-whiteness-of-american-journalism</a></p>
</div>
<div id="ref-CR5YHhw8">
<p>2. <strong>I Analyzed a Year of My Reporting for Gender Bias and This Is What I Found</strong> <br />
Adrienne LaFrance<br />
<em>Medium</em> (2013-09-30) <a href="https://medium.com/ladybits-on-medium/i-analyzed-a-year-of-my-reporting-for-gender-bias-and-this-is-what-i-found-a16c31e1cdf">https://medium.com/ladybits-on-medium/i-analyzed-a-year-of-my-reporting-for-gender-bias-and-this-is-what-i-found-a16c31e1cdf</a></p>
</div>
<div id="ref-gud4dlat">
<p>3. <strong>I Analyzed a Year of My Reporting for Gender Bias (Again)</strong> <br />
Adrienne LaFrance<br />
<em>The Atlantic</em> (2016-02-17) <a href="https://www.theatlantic.com/technology/archive/2016/02/gender-diversity-journalism/463023/">https://www.theatlantic.com/technology/archive/2016/02/gender-diversity-journalism/463023/</a></p>
</div>
<div id="ref-soMuDIhH">
<p>4. <strong>I Spent Two Years Trying to Fix the Gender Imbalance in My Stories</strong> <br />
Ed Yong<br />
<em>The Atlantic</em> (2018-02-06) <a href="https://www.theatlantic.com/science/archive/2018/02/i-spent-two-years-trying-to-fix-the-gender-imbalance-in-my-stories/552404/">https://www.theatlantic.com/science/archive/2018/02/i-spent-two-years-trying-to-fix-the-gender-imbalance-in-my-stories/552404/</a></p>
</div>
<div id="ref-zAQZlRnL">
<p>5. <strong>A Paper Ceiling</strong> <br />
Eran Shor, Arnout van de Rijt, Alex Miltsov, Vivek Kulkarni, Steven Skiena<br />
<em>American Sociological Review</em> (2015-09-30) <a href="https://doi.org/f7tzps">https://doi.org/f7tzps</a> <br />
DOI: <a href="https://doi.org/10.1177/0003122415596999">10.1177/0003122415596999</a></p>
</div>
<div id="ref-2svoFkJj">
<p>6. <strong>Time Trends in Printed News Coverage of Female Subjects, 1880–2008</strong> <br />
Eran Shor, Arnout van de Rijt, Charles Ward, Aharon Blank-Gomel, Steven Skiena<br />
<em>Journalism Studies</em> (2013-09-12) <a href="https://doi.org/gj3z8b">https://doi.org/gj3z8b</a> <br />
DOI: <a href="https://doi.org/10.1080/1461670x.2013.834149">10.1080/1461670x.2013.834149</a></p>
</div>
<div id="ref-1onBkffH">
<p>7. <strong>Women and news: A long and winding road</strong> <br />
Karen Ross, Cynthia Carter<br />
<em>Media, Culture &amp; Society</em> (2011-11-22) <a href="https://doi.org/ccxhvz">https://doi.org/ccxhvz</a> <br />
DOI: <a href="https://doi.org/10.1177/0163443711418272">10.1177/0163443711418272</a></p>
</div>
<div id="ref-WRatNaGC">
<p>8. <strong>Women Are Seen More than Heard in Online Newspapers</strong> <br />
Sen Jia, Thomas Lansdall-Welfare, Saatviga Sudhahar, Cynthia Carter, Nello Cristianini<br />
<em>PLOS ONE</em> (2016-02-03) <a href="https://doi.org/f8q47g">https://doi.org/f8q47g</a> <br />
DOI: <a href="https://doi.org/10.1371/journal.pone.0148434">10.1371/journal.pone.0148434</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/26840432">26840432</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4740422">PMC4740422</a></p>
</div>
<div id="ref-DvlDdQFN">
<p>9. <strong>Lack of female sources in NY Times front-page stories highlights need for change</strong> <br />
Poynter<br />
(2013-07-16) <a href="https://www.poynter.org/reporting-editing/2013/lack-of-female-sources-in-new-york-times-stories-spotlights-need-for-change/">https://www.poynter.org/reporting-editing/2013/lack-of-female-sources-in-new-york-times-stories-spotlights-need-for-change/</a></p>
</div>
<div id="ref-1718NkivT">
<p>10. <strong>Who Makes the News | GMMP 2015 Reports</strong> <a href="https://whomakesthenews.org/gmmp-2015-reports/">https://whomakesthenews.org/gmmp-2015-reports/</a></p>
</div>
<div id="ref-1A5ym3UHq">
<p>11. <strong>Women, Minorities, and Persons with Disabilities in Science and Engineering: 2021 | NSF - National Science Foundation</strong> <a href="https://ncses.nsf.gov/pubs/nsf21321/">https://ncses.nsf.gov/pubs/nsf21321/</a></p>
</div>
<div id="ref-mljKbJAo">
<p>12. <strong>Why we need to increase diversity in the immunology research community</strong> <br />
Akiko Iwasaki<br />
<em>Nature Immunology</em> (2019-08-19) <a href="https://doi.org/gkmwwv">https://doi.org/gkmwwv</a> <br />
DOI: <a href="https://doi.org/10.1038/s41590-019-0470-6">10.1038/s41590-019-0470-6</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/31427777">31427777</a></p>
</div>
<div id="ref-45G5HGj2">
<p>13. <strong>Men Set Their Own Cites High: Gender and Self-citation across Fields and over Time</strong> <br />
Molly M. King, Carl T. Bergstrom, Shelley J. Correll, Jennifer Jacquet, Jevin D. West<br />
<em>Socius: Sociological Research for a Dynamic World</em> (2017-12-08) <a href="https://doi.org/ddzq">https://doi.org/ddzq</a> <br />
DOI: <a href="https://doi.org/10.1177/2378023117738903">10.1177/2378023117738903</a></p>
</div>
<div id="ref-tTpbrlgZ">
<p>14. <strong>Bibliometrics: Global gender disparities in science</strong> <br />
Vincent Larivière, Chaoqun Ni, Yves Gingras, Blaise Cronin, Cassidy R. Sugimoto<br />
<em>Nature</em> (2013-12-11) <a href="https://doi.org/qgf">https://doi.org/qgf</a> <br />
DOI: <a href="https://doi.org/10.1038/504211a">10.1038/504211a</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/24350369">24350369</a></p>
</div>
<div id="ref-hszzrI56">
<p>15. <strong>Fund Black scientists</strong> <br />
Kelly R. Stevens, Kristyn S. Masters, P. I. Imoukhuede, Karmella A. Haynes, Lori A. Setton, Elizabeth Cosgriff-Hernandez, Muyinatu A. Lediju Bell, Padmini Rangamani, Shelly E. Sakiyama-Elbert, Stacey D. Finley, … Omolola Eniola-Adefeso<br />
<em>Cell</em> (2021-02) <a href="https://doi.org/ghvqv5">https://doi.org/ghvqv5</a> <br />
DOI: <a href="https://doi.org/10.1016/j.cell.2021.01.011">10.1016/j.cell.2021.01.011</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/33503447">33503447</a></p>
</div>
<div id="ref-lomwLdKL">
<p>16. <strong>NIH peer review: Criterion scores completely account for racial disparities in overall impact scores</strong> <br />
Elena A. Erosheva, Sheridan Grant, Mei-Ching Chen, Mark D. Lindner, Richard K. Nakamura, Carole J. Lee<br />
<em>Science Advances</em> (2020-06-03) <a href="https://doi.org/gjnjbz">https://doi.org/gjnjbz</a> <br />
DOI: <a href="https://doi.org/10.1126/sciadv.aaz4868">10.1126/sciadv.aaz4868</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/32537494">32537494</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7269672">PMC7269672</a></p>
</div>
<div id="ref-hP9R3Quu">
<p>17. <strong>Topic choice contributes to the lower rate of NIH awards to African-American/black scientists</strong> <br />
Travis A. Hoppe, Aviva Litovitz, Kristine A. Willis, Rebecca A. Meseroll, Matthew J. Perkins, B. Ian Hutchins, Alison F. Davis, Michael S. Lauer, Hannah A. Valantine, James M. Anderson, George M. Santangelo<br />
<em>Science Advances</em> (2019-10-09) <a href="https://doi.org/gghp8t">https://doi.org/gghp8t</a> <br />
DOI: <a href="https://doi.org/10.1126/sciadv.aaw7238">10.1126/sciadv.aaw7238</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/31633016">31633016</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6785250">PMC6785250</a></p>
</div>
<div id="ref-n2VRCgZG">
<p>18. <strong>SOCIOLOGY: The Gender Gap in NIH Grant Applications</strong> <br />
T. J. Ley, B. H. Hamilton<br />
<em>Science</em> (2008-12-05) <a href="https://doi.org/frdj6k">https://doi.org/frdj6k</a> <br />
DOI: <a href="https://doi.org/10.1126/science.1165878">10.1126/science.1165878</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/19056961">19056961</a></p>
</div>
<div id="ref-njNa3CYa">
<p>19. <strong>Race, Ethnicity, and NIH Research Awards</strong> <br />
D. K. Ginther, W. T. Schaffer, J. Schnell, B. Masimore, F. Liu, L. L. Haak, R. Kington<br />
<em>Science</em> (2011-08-18) <a href="https://doi.org/csf8j8">https://doi.org/csf8j8</a> <br />
DOI: <a href="https://doi.org/10.1126/science.1196783">10.1126/science.1196783</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/21852498">21852498</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3412416">PMC3412416</a></p>
</div>
<div id="ref-11fb3ccQ4">
<p>20. <strong>Including Diverse Voices in Science Stories</strong> <br />
Christina Selby<br />
<em>The Open Notebook</em> (2016-08-23) <a href="https://www.theopennotebook.com/2016/08/23/including-diverse-voices-in-science-stories/">https://www.theopennotebook.com/2016/08/23/including-diverse-voices-in-science-stories/</a></p>
</div>
<div id="ref-TPNkhIbZ">
<p>21. <strong>gage. Discover Brilliance</strong> <a href="https://gage.500womenscientists.org/">https://gage.500womenscientists.org/</a></p>
</div>
<div id="ref-1CFcA44h9">
<p>22. <a href="https://www.womensmediacenter.com/shesource">https://www.womensmediacenter.com/shesource</a></p>
</div>
<div id="ref-mfJiAqsK">
<p>23. <strong>Scrapy | A Fast and Powerful Scraping and Web Crawling Framework</strong> <a href="https://scrapy.org/">https://scrapy.org/</a></p>
</div>
<div id="ref-10Tp6Hjnp">
<p>24. <strong>Text Cleaning Tools [R package textclean version 0.9.3]</strong> <br />
Tyler Rinker<br />
(2018-07-23) <a href="https://CRAN.R-project.org/package=textclean">https://CRAN.R-project.org/package=textclean</a></p>
</div>
<div id="ref-RQkLuc5t">
<p>25. <strong>The Stanford CoreNLP Natural Language Processing Toolkit</strong> <br />
Christopher Manning, Mihai Surdeanu, John Bauer, Jenny Finkel, Steven Bethard, David McClosky<br />
<em>Association for Computational Linguistics (ACL)</em> (2014) <a href="https://doi.org/gf3xhp">https://doi.org/gf3xhp</a> <br />
DOI: <a href="https://doi.org/10.3115/v1/p14-5010">10.3115/v1/p14-5010</a></p>
</div>
<div id="ref-dJT5FREG">
<p>26. <strong>humaniformat: A Parser for Human Names</strong> <a href="https://CRAN.R-project.org/package=humaniformat">https://CRAN.R-project.org/package=humaniformat</a></p>
</div>
<div id="ref-cLM5pKQN">
<p>27. <strong>Gender Prediction Methods Based on First Names with genderizeR</strong> <br />
Kamil Wais<br />
<em>The R Journal</em> (2016) <a href="https://doi.org/gf4zqx">https://doi.org/gf4zqx</a> <br />
DOI: <a href="https://doi.org/10.32614/rj-2016-002">10.32614/rj-2016-002</a></p>
</div>
<div id="ref-15Jxi2IvD">
<p>28. <strong>Genderize.io | Determine the gender of a name</strong> <a href="https://genderize.io/">https://genderize.io/</a></p>
</div>
<div id="ref-b1Ltmp3Z">
<p>29. <strong>Analysis of ISCB honorees and keynotes reveals disparities</strong> <br />
Trang T. Le, Daniel S. Himmelstein, Ariel A. Hippen Anderson, Matthew R. Gazzara, Casey S. Greene<br />
<em>Cold Spring Harbor Laboratory</em> (2020-09-22) <a href="https://doi.org/ggr64p">https://doi.org/ggr64p</a> <br />
DOI: <a href="https://doi.org/10.1101/2020.04.14.927251">10.1101/2020.04.14.927251</a></p>
</div>
<div id="ref-OqLU02w9">
<p>30. <strong>Nationality Classification Using Name Embeddings</strong> <br />
Junting Ye, Shuchu Han, Yifan Hu, Baris Coskun, Meizhu Liu, Hong Qin, Steven Skiena<br />
<em>Association for Computing Machinery (ACM)</em> (2017-11-06) <a href="https://doi.org/ggjc78">https://doi.org/ggjc78</a> <br />
DOI: <a href="https://doi.org/10.1145/3132847.3133008">10.1145/3132847.3133008</a></p>
</div>
<div id="ref-1pU88qoC">
<p>31. <strong>OpenStreetMap</strong> <br />
OpenStreetMap<br />
<a href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a></p>
</div>
<div id="ref-1B0FPaPWk">
<p>32. <strong>Text Mining using “dplyr”, “ggplot2”, and Other Tidy Tools [R package tidytext version 0.3.1]</strong> (2021-04-10) <a href="https://CRAN.R-project.org/package=tidytext">https://CRAN.R-project.org/package=tidytext</a></p>
</div>
<div id="ref-r5fYhK24">
<p>33. <strong>Time’s up for journal gender bias.</strong> <br />
Nina Schwalbe, Jennifer Fearon<br />
<em>Lancet (London, England)</em> (2018-06-30) <a href="https://www.ncbi.nlm.nih.gov/pubmed/30070216">https://www.ncbi.nlm.nih.gov/pubmed/30070216</a> <br />
DOI: <a href="https://doi.org/10.1016/s0140-6736(18)31140-1">10.1016/s0140-6736(18)31140-1</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/30070216">30070216</a></p>
</div>
<div id="ref-zp6LSf5E">
<p>34. <strong>Does academic authorship reflect gender bias in pediatric surgery? An analysis of the Journal of Pediatric Surgery, 2007–2017</strong> <br />
Alexandra F. Marrone, Loren Berman, Mary L. Brandt, David H. Rothstein<br />
<em>Journal of Pediatric Surgery</em> (2020-10) <a href="https://doi.org/gj7mc9">https://doi.org/gj7mc9</a> <br />
DOI: <a href="https://doi.org/10.1016/j.jpedsurg.2020.05.020">10.1016/j.jpedsurg.2020.05.020</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/32563536">32563536</a></p>
</div>
<div id="ref-xqtsOPGC">
<p>35. <strong>Gender Trends in Authorship in Psychiatry Journals From 2008 to 2018</strong> <br />
Kamber L. Hart, Sophia Frangou, Roy H. Perlis<br />
<em>Biological Psychiatry</em> (2019-10) <a href="https://doi.org/gjtjzz">https://doi.org/gjtjzz</a> <br />
DOI: <a href="https://doi.org/10.1016/j.biopsych.2019.02.010">10.1016/j.biopsych.2019.02.010</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/30935668">30935668</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6699930">PMC6699930</a></p>
</div>
<div id="ref-MpfuFcH2">
<p>36. <strong>Racial and ethnic imbalance in neuroscience reference lists and intersections with gender</strong> <br />
Maxwell A. Bertolero, Jordan D. Dworkin, Sophia U. David, Claudia López Lloreda, Pragya Srivastava, Jennifer Stiso, Dale Zhou, Kafui Dzirasa, Damien A. Fair, Antonia N. Kaczkurkin, … Danielle S. Bassett<br />
<em>Cold Spring Harbor Laboratory</em> (2020-10-12) <a href="https://doi.org/gj7mdc">https://doi.org/gj7mdc</a> <br />
DOI: <a href="https://doi.org/10.1101/2020.10.12.336230">10.1101/2020.10.12.336230</a></p>
</div>
<div id="ref-YuJbg3zO">
<p>37. <strong>Open collaborative writing with Manubot</strong> <br />
Daniel S. Himmelstein, Vincent Rubinetti, David R. Slochower, Dongbo Hu, Venkat S. Malladi, Casey S. Greene, Anthony Gitter<br />
<em>PLOS Computational Biology</em> (2019-06-24) <a href="https://doi.org/c7np">https://doi.org/c7np</a> <br />
DOI: <a href="https://doi.org/10.1371/journal.pcbi.1007128">10.1371/journal.pcbi.1007128</a> · PMID: <a href="https://www.ncbi.nlm.nih.gov/pubmed/31233491">31233491</a> · PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6611653">PMC6611653</a></p>
</div>
</div>
<!-- default theme -->

<style>
  /* import google fonts */
  @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
  @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

  /* -------------------------------------------------- */
  /* global */
  /* -------------------------------------------------- */

  /* all elements */
  * {
    /* force sans-serif font unless specified otherwise */
    font-family: "Open Sans", "Helvetica", sans-serif;

    /* prevent text inflation on some mobile browsers */
    -webkit-text-size-adjust: none !important;
    -moz-text-size-adjust: none !important;
    -o-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }

  @media only screen {
    /* "page" element */
    body {
      position: relative;
      box-sizing: border-box;
      font-size: 12pt;
      line-height: 1.5;
      max-width: 8.5in;
      margin: 20px auto;
      padding: 40px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* "page" element */
    body {
      padding: 20px;
      margin: 0;
      border-radius: 0;
      border: none;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
      background: none;
    }
  }

  /* -------------------------------------------------- */
  /* headings */
  /* -------------------------------------------------- */

  /* all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 20px 0;
    padding: 0;
    font-weight: bold;
  }

  /* biggest heading */
  h1 {
    margin: 40px 0;
    text-align: center;
  }

  /* second biggest heading */
  h2 {
    margin-top: 30px;
    padding-bottom: 5px;
    border-bottom: solid 1px #bdbdbd;
  }

  /* heading font sizes */
  h1 {
    font-size: 2em;
  }
  h2 {
    font-size: 1.5em;
  }
  h3 {
    font-size: 1.35em;
  }
  h4 {
    font-size: 1.25em;
  }
  h5 {
    font-size: 1.15em;
  }
  h6 {
    font-size: 1em;
  }

  /* -------------------------------------------------- */
  /* manuscript header */
  /* -------------------------------------------------- */

  /* manuscript title */
  header > h1 {
    margin: 0;
  }

  /* manuscript title caption text (ie "automatically generated on") */
  header + p {
    text-align: center;
    margin-top: 10px;
  }

  /* -------------------------------------------------- */
  /* text elements */
  /* -------------------------------------------------- */

  /* links */
  a {
    color: #2196f3;
    overflow-wrap: break-word;
  }

  /* superscripts and subscripts */
  sub,
  sup {
    /* prevent from affecting line height */
    line-height: 0;
  }

  /* unordered and ordered lists*/
  ul,
  ol {
    padding-left: 20px;
  }

  /* class for styling text semibold */
  .semibold {
    font-weight: 600;
  }

  /* class for styling elements horizontally left aligned */
  .left {
    display: block;
    text-align: left;
    margin-left: auto;
    margin-right: 0;
    justify-content: left;
  }

  /* class for styling elements horizontally centered */
  .center {
    display: block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }

  /* class for styling elements horizontally right aligned */
  .right {
    display: block;
    text-align: right;
    margin-left: 0;
    margin-right: auto;
    justify-content: right;
  }

  /* -------------------------------------------------- */
  /* section elements */
  /* -------------------------------------------------- */

  /* horizontal divider line */
  hr {
    border: none;
    height: 1px;
    background: #bdbdbd;
  }

  /* paragraphs, horizontal dividers, figures, tables, code */
  p,
  hr,
  figure,
  table,
  pre {
    /* treat all as "paragraphs", with consistent vertical margins */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* figures */
  /* -------------------------------------------------- */

  /* figure */
  figure {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure caption */
  figcaption {
    padding: 0;
    padding-top: 10px;
  }

  /* figure image element */
  figure > img,
  figure > svg {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure auto-number */
  img + figcaption > span:first-of-type,
  svg + figcaption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* tables */
  /* -------------------------------------------------- */

  /* table */
  table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* table cells */
  th,
  td {
    border: solid 1px #bdbdbd;
    padding: 10px;
    /* squash table if too wide for page by forcing line breaks */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* header row and even rows */
  th,
  tr:nth-child(2n) {
    background-color: #fafafa;
  }

  /* odd rows */
  tr:nth-child(2n + 1) {
    background-color: #ffffff;
  }

  /* table caption */
  caption {
    text-align: left;
    padding: 0;
    padding-bottom: 10px;
  }

  /* table auto-number */
  table > caption > span:first-of-type,
  div.table_wrapper > table > caption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* code */
  /* -------------------------------------------------- */

  /* multi-line code block */
  pre {
    padding: 10px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
    break-inside: avoid;
    text-align: left;
  }

  /* inline code, ie code within normal text */
  :not(pre) > code {
    padding: 0 4px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
  }

  /* code text */
  /* apply all children, to reach syntax highlighting sub-elements */
  code,
  code * {
    /* force monospace font */
    font-family: "Source Code Pro", "Courier New", monospace;
  }

  /* -------------------------------------------------- */
  /* quotes */
  /* -------------------------------------------------- */

  /* quoted text */
  blockquote {
    margin: 0;
    padding: 0;
    border-left: 4px solid #bdbdbd;
    padding-left: 16px;
    break-inside: avoid;
  }

  /* -------------------------------------------------- */
  /* banners */
  /* -------------------------------------------------- */

  /* info banners */
  .banner {
    box-sizing: border-box;
    display: block;
    position: relative;
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding: 20px;
    text-align: center;
  }

  /* paragraph in banner */
  .banner > p {
    margin: 0;
  }

  /* -------------------------------------------------- */
  /* highlight colors */
  /* -------------------------------------------------- */

  .white {
    background: #ffffff;
  }
  .lightgrey {
    background: #eeeeee;
  }
  .grey {
    background: #757575;
  }
  .darkgrey {
    background: #424242;
  }
  .black {
    background: #000000;
  }
  .lightred {
    background: #ffcdd2;
  }
  .lightyellow {
    background: #ffecb3;
  }
  .lightgreen {
    background: #dcedc8;
  }
  .lightblue {
    background: #e3f2fd;
  }
  .lightpurple {
    background: #f3e5f5;
  }
  .red {
    background: #f44336;
  }
  .orange {
    background: #ff9800;
  }
  .yellow {
    background: #ffeb3b;
  }
  .green {
    background: #4caf50;
  }
  .blue {
    background: #2196f3;
  }
  .purple {
    background: #9c27b0;
  }
  .white,
  .lightgrey,
  .lightred,
  .lightyellow,
  .lightgreen,
  .lightblue,
  .lightpurple,
  .orange,
  .yellow,
  .white a,
  .lightgrey a,
  .lightred a,
  .lightyellow a,
  .lightgreen a,
  .lightblue a,
  .lightpurple a,
  .orange a,
  .yellow a {
    color: #000000;
  }
  .grey,
  .darkgrey,
  .black,
  .red,
  .green,
  .blue,
  .purple,
  .grey a,
  .darkgrey a,
  .black a,
  .red a,
  .green a,
  .blue a,
  .purple a {
    color: #ffffff;
  }

  /* -------------------------------------------------- */
  /* buttons */
  /* -------------------------------------------------- */

  /* class for styling links like buttons */
  .button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 5px;
    padding: 10px 20px;
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    background: none;
    color: #2196f3;
    border: solid 1px #bdbdbd;
    border-radius: 5px;
  }

  /* buttons when hovered */
  .button:hover:not([disabled]),
  .icon_button:hover:not([disabled]) {
    cursor: pointer;
    background: #f5f5f5;
  }

  /* buttons when disabled */
  .button[disabled],
  .icon_button[disabled] {
    opacity: 0.35;
    pointer-events: none;
  }

  /* class for styling buttons containg only single icon */
  .icon_button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 5px;
    border: none;
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* icon button inner svg image */
  .icon_button > svg {
    height: 16px;
  }

  /* -------------------------------------------------- */
  /* icons */
  /* -------------------------------------------------- */

  /* class for styling icons inline with text */
  .inline_icon {
    height: 1em;
    position: relative;
    top: 0.125em;
  }

  /* -------------------------------------------------- */
  /* print control */
  /* -------------------------------------------------- */

  @media print {
    @page {
      /* suggested printing margin */
      margin: 0.5in;
    }

    /* document and "page" elements */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* "page" element */
    body {
      font-size: 11pt !important;
      line-height: 1.35;
    }

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 15px 0;
    }

    /* figures and tables */
    figure,
    table {
      font-size: 0.85em;
    }

    /* table cells */
    th,
    td {
      padding: 5px;
    }

    /* shrink font awesome icons */
    i.fas,
    i.fab,
    i.far,
    i.fal {
      transform: scale(0.85);
    }

    /* decrease banner margins */
    .banner {
      margin-top: 15px;
      margin-bottom: 15px;
      padding: 15px;
    }

    /* class for centering an element vertically on its own page */
    .page_center {
      margin: auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      vertical-align: middle;
      break-before: page;
      break-after: page;
    }

    /* always insert a page break before the element */
    .page_break_before {
      break-before: page;
    }

    /* always insert a page break after the element */
    .page_break_after {
      break-after: page;
    }

    /* avoid page break before the element */
    .page_break_before_avoid {
      break-before: avoid;
    }

    /* avoid page break after the element */
    .page_break_after_avoid {
      break-after: avoid;
    }

    /* avoid page break inside the element */
    .page_break_inside_avoid {
      break-inside: avoid;
    }
  }

  /* -------------------------------------------------- */
  /* override pandoc css quirks */
  /* -------------------------------------------------- */

  .sourceCode {
    /* prevent unsightly overflow in wide code blocks */
    overflow: auto !important;
  }

  div.sourceCode {
    /* prevent background fill on top-most code block  container */
    background: none !important;
  }

  .sourceCode * {
    /* force consistent line spacing */
    line-height: 1.5 !important;
  }

  div.sourceCode {
    /* style code block margins same as <pre> element */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* tablenos */
  /* -------------------------------------------------- */

  /* tablenos wrapper */
  .tablenos {
    /* show scrollbar on tables if necessary to prevent overflow */
    width: 100%;
    margin: 20px 0;
  }

  .tablenos > table {
    /* move margins from table to table_wrapper to allow margin collapsing */
    margin: 0;
  }

  @media only screen {
    /* tablenos wrapper */
    .tablenos {
      /* show scrollbar on tables if necessary to prevent overflow */
      overflow-x: auto !important;
    }

    .tablenos th,
    .tablenos td {
      overflow-wrap: unset !important;
      word-break: unset !important;
    }

    /* table in wrapper */
    .tablenos table,
    .tablenos table * {
      /* don't break table words */
      overflow-wrap: normal !important;
    }
  }
</style>
<!-- 
    Plugin Core

    Functions needed for and shared across all first-party plugins.
-->

<script>
  // get element that is target of hash (from link element or url)
  function getHashTarget(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector(`[id="${id}"]`);
    if (!target) return;

    // if figure or table, modify target to get expected element
    if (id.indexOf("fig:") === 0) target = target.querySelector("figure");
    if (id.indexOf("tbl:") === 0) target = target.querySelector("table");

    return target;
  }

  // get position/dimensions of element or viewport
  function getRectInView(element) {
    let rect = {};
    rect.left = 0;
    rect.top = 0;
    rect.right = document.documentElement.clientWidth;
    rect.bottom = document.documentElement.clientHeight;
    let style = {};

    if (element instanceof HTMLElement) {
      rect = element.getBoundingClientRect();
      style = window.getComputedStyle(element);
    }

    const margin = {};
    margin.left = parseFloat(style.marginLeftWidth) || 0;
    margin.top = parseFloat(style.marginTopWidth) || 0;
    margin.right = parseFloat(style.marginRightWidth) || 0;
    margin.bottom = parseFloat(style.marginBottomWidth) || 0;

    const border = {};
    border.left = parseFloat(style.borderLeftWidth) || 0;
    border.top = parseFloat(style.borderTopWidth) || 0;
    border.right = parseFloat(style.borderRightWidth) || 0;
    border.bottom = parseFloat(style.borderBottomWidth) || 0;

    const newRect = {};
    newRect.left = rect.left + margin.left + border.left;
    newRect.top = rect.top + margin.top + border.top;
    newRect.right = rect.right + margin.right + border.right;
    newRect.bottom = rect.bottom + margin.bottom + border.bottom;
    newRect.width = newRect.right - newRect.left;
    newRect.height = newRect.bottom - newRect.top;

    return newRect;
  }

  // get position of element relative to page
  function getRectInPage(element) {
    const rect = getRectInView(element);
    const body = getRectInView(document.body);

    const newRect = {};
    newRect.left = rect.left - body.left;
    newRect.top = rect.top - body.top;
    newRect.right = rect.right - body.left;
    newRect.bottom = rect.bottom - body.top;
    newRect.width = rect.width;
    newRect.height = rect.height;

    return newRect;
  }

  // get closest element before specified element that matches query
  function firstBefore(element, query) {
    while (element && element !== document.body && !element.matches(query))
      element = element.previousElementSibling || element.parentNode;

    return element;
  }

  // check if element is part of collapsed heading
  function isCollapsed(element) {
    while (element && element !== document.body) {
      if (element.dataset.collapsed === "true") return true;
      element = element.parentNode;
    }
    return false;
  }

  // expand any collapsed parent containers of element if necessary
  function expandElement(element) {
    if (isCollapsed(element)) {
      // accordion plugin
      const heading = firstBefore(element, "h2");
      if (heading) heading.click();
      // details/summary HTML element
      const summary = firstBefore(element, "summary");
      if (summary) summary.click();
    }
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);

    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // get list of elements after a start element up to element matching query
  function nextUntil(element, query, exclude) {
    const elements = [];
    while (((element = element.nextElementSibling), element)) {
      if (element.matches(query)) break;
      if (!element.matches(exclude)) elements.push(element);
    }
    return elements;
  }
</script>
<!--
  Accordion Plugin

  Allows sections of content under h2 headings to be collapsible.
-->

<script type="module">
  // whether to always start expanded ('false'), always start collapsed
  // ('true'), or start collapsed when screen small ('auto')
  const startCollapsed = "auto";

  // start script
  function start() {
    // run through each <h2> heading
    const headings = document.querySelectorAll("h2");
    for (const heading of headings) {
      addArrow(heading);

      // start expanded/collapsed based on option
      if (
        startCollapsed === "true" ||
        (startCollapsed === "auto" && isSmallScreen())
      )
        collapseHeading(heading);
      else expandElement(heading);
    }

    // attach hash change listener to window
    window.addEventListener("hashchange", onHashChange);
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) goToElement(target);
  }

  // add arrow to heading
  function addArrow(heading) {
    // add arrow button
    const arrow = document.createElement("button");
    arrow.innerHTML = document.querySelector(".icon_angle_down").innerHTML;
    arrow.classList.add("icon_button", "accordion_arrow");
    heading.insertBefore(arrow, heading.firstChild);

    // attach click listener to heading and button
    heading.addEventListener("click", onHeadingClick);
    arrow.addEventListener("click", onArrowClick);
  }

  // determine if on mobile-like device with small screen
  function isSmallScreen() {
    return Math.min(window.innerWidth, window.innerHeight) < 480;
  }

  // when <h2> heading is clicked
  function onHeadingClick(event) {
    // only collapse if <h2> itself is target of click (eg, user did
    // not click on anchor within <h2>)
    if (event.target === this) toggleCollapse(this);
  }

  // when arrow button is clicked
  function onArrowClick() {
    toggleCollapse(this.parentNode);
  }

  // collapse section if expanded, expand if collapsed
  function toggleCollapse(heading) {
    if (heading.dataset.collapsed === "false") collapseHeading(heading);
    else expandElement(heading);
  }

  // elements to exclude from collapse, such as table of contents panel,
  // hypothesis panel, etc
  const exclude = "#toc_panel, div.annotator-frame, #lightbox_overlay";

  // collapse section
  function collapseHeading(heading) {
    heading.setAttribute("data-collapsed", "true");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "true");
  }

  // expand section
  function expandElement(heading) {
    heading.setAttribute("data-collapsed", "false");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "false");
  }

  // get list of elements between this <h2> and next <h2> or <h1>
  // ("children" of the <h2> section)
  function getChildren(heading) {
    return nextUntil(heading, "h2, h1", exclude);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
  <!-- modified from: https://fontawesome.com/icons/angle-down -->
  <svg width="16" height="16" viewBox="0 0 448 512">
    <path
      fill="currentColor"
      d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* accordion arrow button */
    .accordion_arrow {
      margin-right: 10px;
    }

    /* arrow icon when <h2> data-collapsed attribute true */
    h2[data-collapsed="true"] > .accordion_arrow > svg {
      transform: rotate(-90deg);
    }

    /* all elements (except <h2>'s) when data-collapsed attribute true */
    *:not(h2)[data-collapsed="true"] {
      display: none;
    }

    /* accordion arrow button when hovered and <h2>'s when hovered */
    .accordion_arrow:hover,
    h2[data-collapsed="true"]:hover,
    h2[data-collapsed="false"]:hover {
      cursor: pointer;
    }
  }

  /* always hide accordion arrow button on print */
  @media only print {
    .accordion_arrow {
      display: none;
    }
  }
</style>
<!--
  Anchors Plugin

  Adds an anchor next to each of a certain type of element that provides a
  human-readable url to that specific item/position in the document (e.g.
  "manuscript.html#abstract"). It also makes it such that scrolling out of view
  of a target removes its identifier from the url.
-->

<script type="module">
  // which types of elements to add anchors next to, in "document.querySelector"
  // format
  const typesQuery = 'h1, h2, h3, [id^="fig:"], [id^="tbl:"], [id^="eq:"]';

  // start script
  function start() {
    // add anchor to each element of specified types
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) addAnchor(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // when window is scrolled
  function onScroll() {
    // if url has hash and user has scrolled out of view of hash
    // target, remove hash from url
    const tolerance = 100;
    const target = getHashTarget();
    if (target) {
      if (
        target.getBoundingClientRect().top > window.innerHeight + tolerance ||
        target.getBoundingClientRect().bottom < 0 - tolerance
      )
        history.pushState(null, null, " ");
    }
  }

  // add anchor to element
  function addAnchor(element) {
    let addTo; // element to add anchor button to

    // if figure or table, modify withId and addTo to get expected
    // elements
    if (element.id.indexOf("fig:") === 0) {
      addTo = element.querySelector("figcaption");
    } else if (element.id.indexOf("tbl:") === 0) {
      addTo = element.querySelector("caption");
    } else if (element.id.indexOf("eq:") === 0) {
      addTo = element.querySelector(".eqnos-number");
    }

    addTo = addTo || element;
    const id = element.id || null;

    // do not add anchor if element doesn't have assigned id.
    // id is generated by pandoc and is assumed to be unique and
    // human-readable
    if (!id) return;

    // create anchor button
    const anchor = document.createElement("a");
    anchor.innerHTML = document.querySelector(".icon_link").innerHTML;
    anchor.title = "Link to this part of the document";
    anchor.classList.add("icon_button", "anchor");
    anchor.dataset.ignore = "true";
    anchor.href = "#" + id;
    addTo.appendChild(anchor);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- link icon -->

<template class="icon_link">
  <!-- modified from: https://fontawesome.com/icons/link -->
  <svg width="16" height="16" viewBox="0 0 512 512">
    <path
      fill="currentColor"
      d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* anchor button */
    .anchor {
      opacity: 0;
      margin-left: 5px;
    }

    /* anchor buttons within <h2>'s */
    h2 .anchor {
      margin-left: 10px;
    }

    /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
    *:hover > .anchor,
    .anchor:hover,
    .anchor:focus {
      opacity: 1;
    }

    /* anchor button when hovered */
    .anchor:hover {
      cursor: pointer;
    }
  }

  /* always show anchor button on devices with no mouse/hover ability */
  @media (hover: none) {
    .anchor {
      opacity: 1;
    }
  }

  /* always hide anchor button on print */
  @media only print {
    .anchor {
      display: none;
    }
  }
</style>
<!-- 
    Attributes Plugin

    Allows arbitrary HTML attributes to be attached to (almost) any element.
    Place an HTML comment inside or next to the desired element with the content:
    $attribute="value"
-->

<script type="module">
  // start script
  function start() {
    // get list of comments in document
    const comments = findComments();

    for (const comment of comments)
      if (comment.parentElement)
        addAttributes(comment.parentElement, comment.nodeValue.trim());
  }

  // add html attributes to specified element based on string of
  // html attributes and values
  function addAttributes(element, text) {
    // regex's for finding attribute/value pairs in the format of
    // attribute="value" or attribute='value
    const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
    const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

    // loop through attribute/value pairs
    let match;
    while ((match = text.match(regex2) || text.match(regex1))) {
      // get attribute and value from regex capture groups
      let attribute = match[1];
      let value = match[2];

      // remove from string
      text = text.substring(match.index + match[0].length);

      if (!attribute || !value) break;

      // set attribute of parent element
      try {
        element.setAttribute(attribute, value);
      } catch (error) {
        console.log(error);
      }

      // special case for colspan
      if (attribute === "colspan") removeTableCells(element, value);
    }
  }

  // get list of comment elements in document
  function findComments() {
    const comments = [];

    // iterate over comment nodes in document
    function acceptNode(node) {
      return NodeFilter.FILTER_ACCEPT;
    }
    const iterator = document.createNodeIterator(
      document.body,
      NodeFilter.SHOW_COMMENT,
      acceptNode
    );
    let node;
    while ((node = iterator.nextNode())) comments.push(node);

    return comments;
  }

  // remove certain number of cells after specified cell
  function removeTableCells(cell, number) {
    number = parseInt(number);
    if (!number) return;

    // remove elements
    for (; number > 1; number--) {
      if (cell.nextElementSibling) cell.nextElementSibling.remove();
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>
<!--
  Jump to First Plugin

  Adds a button next to each reference entry, figure, and table that jumps the
  page to the first occurrence of a link to that item in the manuscript.
-->

<script type="module">
  // whether to add buttons next to reference entries
  const references = "true";
  // whether to add buttons next to figures
  const figures = "true";
  // whether to add buttons next to tables
  const tables = "true";

  // start script
  function start() {
    if (references !== "false") makeButtons("ref-", "p", "reference");
    if (figures !== "false") makeButtons("fig:", "figcaption", "figure");
    if (tables !== "false") makeButtons("tbl:", "caption", "table");
  }

  // when jump button clicked
  function onButtonClick() {
    const first = getFirstOccurrence(this.dataset.id);
    if (!first) return;

    // update url hash so navigating "back" in history will return user to button
    window.location.hash = this.dataset.id;
    // scroll to link
    const timeout = function () {
      goToElement(first, window.innerHeight * 0.5);
    };
    window.setTimeout(timeout, 0);
  }

  // get first occurrence of link to item in document
  function getFirstOccurrence(id) {
    let query = "a";
    query += '[href="#' + id + '"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelector(query);
  }

  // add button next to each reference entry, figure, or table
  function makeButtons(query, containerQuery, subject) {
    const elements = document.querySelectorAll(`[id^="${query}"`);
    for (const element of elements) {
      const id = element.id;
      const buttonContainer = element.querySelector(containerQuery);
      const first = getFirstOccurrence(id);

      // if can't find link to reference or place to put button, ignore
      if (!first || !buttonContainer) continue;

      // make jump button
      let button = document.createElement("button");
      button.classList.add("icon_button", "jump_arrow");
      button.title = `Jump to the first occurrence of this ${subject} in the document`;
      const icon = document.querySelector(".icon_angle_double_up");
      button.innerHTML = icon.innerHTML;
      button.dataset.id = id;
      button.dataset.ignore = "true";
      button.addEventListener("click", onButtonClick);
      buttonContainer.prepend(button);
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
  <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
  <svg width="16" height="16" viewBox="0 0 320 512">
    <path
      fill="currentColor"
      d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* jump button */
    .jump_arrow {
      position: relative;
      top: 0.125em;
      margin-right: 5px;
    }
  }

  /* always hide jump button on print */
  @media only print {
    .jump_arrow {
      display: none;
    }
  }
</style>
<!-- 
    Lightbox Plugin

    Makes it such that when a user clicks on an image, the image fills the
    screen and the user can pan/drag/zoom the image and navigate between other
    images in the document.
-->

<script type="module">
  // list of possible zoom/scale factors
  const zooms =
    "0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8";
  // whether to fit image to view ('fit'), display at 100% and shrink if
  // necessary ('shrink'), or always display at 100% ('100')
  const defaultZoom = "fit";
  // whether to zoom in/out toward center of view ('true') or mouse ('false')
  const centerZoom = "false";

  // start script
  function start() {
    // run through each <img> element
    const imgs = document.querySelectorAll("figure > img");
    let count = 1;
    for (const img of imgs) {
      img.classList.add("lightbox_document_img");
      img.dataset.number = count;
      img.dataset.total = imgs.length;
      img.addEventListener("click", openLightbox);
      count++;
    }

    // attach mouse and key listeners to window
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("keyup", onKeyUp);
  }

  // when mouse is moved anywhere in window
  function onWindowMouseMove(event) {
    window.mouseX = event.clientX;
    window.mouseY = event.clientY;
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("lightbox_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("lightbox_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeLightbox();
        break;
    }
  }

  // open lightbox
  function openLightbox() {
    const lightbox = makeLightbox(this);
    if (!lightbox) return;

    blurBody(lightbox);
    document.body.appendChild(lightbox);
  }

  // make lightbox
  function makeLightbox(img) {
    // delete lightbox if it exists, start fresh
    closeLightbox();

    // create screen overlay containing lightbox
    const overlay = document.createElement("div");
    overlay.id = "lightbox_overlay";

    // create image info boxes
    const numberInfo = document.createElement("div");
    const zoomInfo = document.createElement("div");
    numberInfo.id = "lightbox_number_info";
    zoomInfo.id = "lightbox_zoom_info";

    // create container for image
    const imageContainer = document.createElement("div");
    imageContainer.id = "lightbox_image_container";
    const lightboxImg = makeLightboxImg(
      img,
      imageContainer,
      numberInfo,
      zoomInfo
    );
    imageContainer.appendChild(lightboxImg);

    // create bottom container for caption and navigation buttons
    const bottomContainer = document.createElement("div");
    bottomContainer.id = "lightbox_bottom_container";
    const caption = makeCaption(img);
    const prevButton = makePrevButton(img);
    const nextButton = makeNextButton(img);
    bottomContainer.appendChild(prevButton);
    bottomContainer.appendChild(caption);
    bottomContainer.appendChild(nextButton);

    // attach top middle and bottom to overlay
    overlay.appendChild(numberInfo);
    overlay.appendChild(zoomInfo);
    overlay.appendChild(imageContainer);
    overlay.appendChild(bottomContainer);

    return overlay;
  }

  // make <img> object that is intuitively draggable and zoomable
  function makeLightboxImg(sourceImg, container, numberInfoBox, zoomInfoBox) {
    // create copy of source <img>
    const img = sourceImg.cloneNode(true);
    img.classList.remove("lightbox_document_img");
    img.removeAttribute("id");
    img.removeAttribute("width");
    img.removeAttribute("height");
    img.style.position = "unset";
    img.style.margin = "0";
    img.style.padding = "0";
    img.style.width = "";
    img.style.height = "";
    img.style.minWidth = "";
    img.style.minHeight = "";
    img.style.maxWidth = "";
    img.style.maxHeight = "";
    img.id = "lightbox_img";

    // build sorted list of zoomSteps
    const zoomSteps = zooms.split(/[^0-9.]/).map((step) => parseFloat(step));
    zoomSteps.sort((a, b) => a - b);

    // <img> object property variables
    let zoom = 1;
    let translateX = 0;
    let translateY = 0;
    let clickMouseX = undefined;
    let clickMouseY = undefined;
    let clickTranslateX = undefined;
    let clickTranslateY = undefined;

    updateNumberInfo();

    // update image numbers displayed in info box
    function updateNumberInfo() {
      numberInfoBox.innerHTML =
        sourceImg.dataset.number + " of " + sourceImg.dataset.total;
    }

    // update zoom displayed in info box
    function updateZoomInfo() {
      let zoomInfo = zoom * 100;
      if (!Number.isInteger(zoomInfo)) zoomInfo = zoomInfo.toFixed(2);
      zoomInfoBox.innerHTML = zoomInfo + "%";
    }

    // move to closest zoom step above current zoom
    const zoomIn = function () {
      for (const zoomStep of zoomSteps) {
        if (zoomStep > zoom) {
          zoom = zoomStep;
          break;
        }
      }
      updateTransform();
    };

    // move to closest zoom step above current zoom
    const zoomOut = function () {
      zoomSteps.reverse();
      for (const zoomStep of zoomSteps) {
        if (zoomStep < zoom) {
          zoom = zoomStep;
          break;
        }
      }
      zoomSteps.reverse();

      updateTransform();
    };

    // update display of <img> based on scale/translate properties
    const updateTransform = function () {
      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      // get new width/height after scale
      const rect = img.getBoundingClientRect();
      // limit translate
      translateX = Math.max(translateX, -rect.width / 2);
      translateX = Math.min(translateX, rect.width / 2);
      translateY = Math.max(translateY, -rect.height / 2);
      translateY = Math.min(translateY, rect.height / 2);

      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      updateZoomInfo();
    };

    // fit <img> to container
    const fit = function () {
      // no x/y offset, 100% zoom by default
      translateX = 0;
      translateY = 0;
      zoom = 1;

      // widths of <img> and container
      const imgWidth = img.naturalWidth;
      const imgHeight = img.naturalHeight;
      const containerWidth = parseFloat(
        window.getComputedStyle(container).width
      );
      const containerHeight = parseFloat(
        window.getComputedStyle(container).height
      );

      // how much zooming is needed to fit <img> to container
      const xRatio = imgWidth / containerWidth;
      const yRatio = imgHeight / containerHeight;
      const maxRatio = Math.max(xRatio, yRatio);
      const newZoom = 1 / maxRatio;

      // fit <img> to container according to option
      if (defaultZoom === "shrink") {
        if (maxRatio > 1) zoom = newZoom;
      } else if (defaultZoom === "fit") zoom = newZoom;

      updateTransform();
    };

    // when mouse wheel is rolled anywhere in container
    const onContainerWheel = function (event) {
      if (!event) return;

      // let ctrl + mouse wheel to zoom behave as normal
      if (event.ctrlKey) return;

      // prevent normal scroll behavior
      event.preventDefault();
      event.stopPropagation();

      // point around which to scale img
      const viewRect = container.getBoundingClientRect();
      const viewX = (viewRect.left + viewRect.right) / 2;
      const viewY = (viewRect.top + viewRect.bottom) / 2;
      const originX = centerZoom === "true" ? viewX : mouseX;
      const originY = centerZoom === "true" ? viewY : mouseY;

      // get point on image under origin
      const oldRect = img.getBoundingClientRect();
      const oldPercentX = (originX - oldRect.left) / oldRect.width;
      const oldPercentY = (originY - oldRect.top) / oldRect.height;

      // increment/decrement zoom
      if (event.deltaY < 0) zoomIn();
      if (event.deltaY > 0) zoomOut();

      // get offset between previous image point and origin
      const newRect = img.getBoundingClientRect();
      const offsetX = originX - (newRect.left + newRect.width * oldPercentX);
      const offsetY = originY - (newRect.top + newRect.height * oldPercentY);

      // translate image to keep image point under origin
      translateX += offsetX;
      translateY += offsetY;

      // perform translate
      updateTransform();
    };

    // when container is clicked
    function onContainerClick(event) {
      // if container itself is target of click, and not other
      // element above it
      if (event.target === this) closeLightbox();
    }

    // when mouse button is pressed on image
    const onImageMouseDown = function (event) {
      // store original mouse position relative to image
      clickMouseX = window.mouseX;
      clickMouseY = window.mouseY;
      clickTranslateX = translateX;
      clickTranslateY = translateY;
      event.stopPropagation();
      event.preventDefault();
    };

    // when mouse button is released anywhere in window
    const onWindowMouseUp = function (event) {
      // reset original mouse position
      clickMouseX = undefined;
      clickMouseY = undefined;
      clickTranslateX = undefined;
      clickTranslateY = undefined;

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mouseup", onWindowMouseUp);
    };

    // when mouse is moved anywhere in window
    const onWindowMouseMove = function (event) {
      if (
        clickMouseX === undefined ||
        clickMouseY === undefined ||
        clickTranslateX === undefined ||
        clickTranslateY === undefined
      )
        return;

      // offset image based on original and current mouse position
      translateX = clickTranslateX + window.mouseX - clickMouseX;
      translateY = clickTranslateY + window.mouseY - clickMouseY;
      updateTransform();
      event.preventDefault();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mousemove", onWindowMouseMove);
    };

    // when window is resized
    const onWindowResize = function (event) {
      fit();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("resize", onWindowResize);
    };

    // attach the necessary event listeners
    img.addEventListener("dblclick", fit);
    img.addEventListener("mousedown", onImageMouseDown);
    container.addEventListener("wheel", onContainerWheel);
    container.addEventListener("mousedown", onContainerClick);
    container.addEventListener("touchstart", onContainerClick);
    window.addEventListener("mouseup", onWindowMouseUp);
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("resize", onWindowResize);

    // run fit() after lightbox atttached to document and <img> Loaded
    // so needed container and img dimensions available
    img.addEventListener("load", fit);

    return img;
  }

  // make caption
  function makeCaption(img) {
    const caption = document.createElement("div");
    caption.id = "lightbox_caption";
    const captionSource = img.nextElementSibling;
    if (captionSource.tagName.toLowerCase() === "figcaption") {
      const captionCopy = makeCopy(captionSource);
      caption.innerHTML = captionCopy.innerHTML;
    }

    caption.addEventListener("touchstart", function (event) {
      event.stopPropagation();
    });

    return caption;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // make button to jump to previous image in document
  function makePrevButton(img) {
    const prevButton = document.createElement("button");
    prevButton.id = "lightbox_prev_button";
    prevButton.title = "Jump to the previous image in the document [←]";
    prevButton.classList.add("icon_button", "lightbox_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;

    // attach click listeners to button
    prevButton.addEventListener("click", function () {
      getPrevImg(img).click();
    });

    return prevButton;
  }

  // make button to jump to next image in document
  function makeNextButton(img) {
    const nextButton = document.createElement("button");
    nextButton.id = "lightbox_next_button";
    nextButton.title = "Jump to the next image in the document [→]";
    nextButton.classList.add("icon_button", "lightbox_button");
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;

    // attach click listeners to button
    nextButton.addEventListener("click", function () {
      getNextImg(img).click();
    });

    return nextButton;
  }

  // get previous image in document
  function getPrevImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if < 1
    if (index - 1 >= 0) index--;
    else index = imgs.length - 1;
    return imgs[index];
  }

  // get next image in document
  function getNextImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if > total
    if (index + 1 <= imgs.length - 1) index++;
    else index = 0;
    return imgs[index];
  }

  // close lightbox
  function closeLightbox() {
    focusBody();

    const lightbox = document.getElementById("lightbox_overlay");
    if (lightbox) lightbox.remove();
  }

  // make all elements behind lightbox non-focusable
  function blurBody(overlay) {
    const all = document.querySelectorAll("*");
    for (const element of all) element.tabIndex = -1;
    document.body.classList.add("body_no_scroll");
  }

  // make all elements focusable again
  function focusBody() {
    const all = document.querySelectorAll("*");
    for (const element of all) element.removeAttribute("tabIndex");
    document.body.classList.remove("body_no_scroll");
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* regular <img> in document when hovered */
    img.lightbox_document_img:hover {
      cursor: pointer;
    }

    .body_no_scroll {
      overflow: hidden !important;
    }

    /* screen overlay */
    #lightbox_overlay {
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 3;
    }

    /* middle area containing lightbox image */
    #lightbox_image_container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      padding: 20px;
    }

    /* bottom area containing caption */
    #lightbox_bottom_container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      min-height: 100px;
      max-height: 100px;
      background: rgba(0, 0, 0, 0.5);
    }

    /* image number info text box */
    #lightbox_number_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      left: 2px;
      top: 0;
      z-index: 4;
    }

    /* zoom info text box */
    #lightbox_zoom_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      right: 2px;
      top: 0;
      z-index: 4;
    }

    /* copy of image caption */
    #lightbox_caption {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      max-height: 100%;
      padding: 10px 0;
      text-align: center;
      overflow-y: auto;
      color: #ffffff;
    }

    /* navigation previous/next button */
    .lightbox_button {
      width: 100px;
      height: 100%;
      min-width: 100px;
      min-height: 100%;
      color: #ffffff;
    }

    /* navigation previous/next button when hovered */
    .lightbox_button:hover {
      background: none !important;
    }

    /* navigation button icon */
    .lightbox_button > svg {
      height: 25px;
    }

    /* figure auto-number */
    #lightbox_caption > span:first-of-type {
      font-weight: bold;
      margin-right: 5px;
    }

    /* lightbox image when hovered */
    #lightbox_img:hover {
      cursor: grab;
    }

    /* lightbox image when grabbed */
    #lightbox_img:active {
      cursor: grabbing;
    }
  }

  /* when on screen < 480px wide */
  @media only screen and (max-width: 480px) {
    /* make navigation buttons skinnier on small screens to make more room for caption text */
    .lightbox_button {
      width: 50px;
      min-width: 50px;
    }
  }

  /* always hide lightbox on print */
  @media only print {
    #lightbox_overlay {
      display: none;
    }
  }
</style>
<!-- 
  Link Highlight Plugin

  Makes it such that when a user hovers or focuses a link, other links that have
  the same target will be highlighted. It also makes it such that when clicking
  a link, the target of the link (eg reference, figure, table) is briefly
  highlighted.
-->

<script type="module">
  // whether to also highlight links that go to external urls
  const externalLinks = "false";
  // whether user must click off to unhighlight instead of just
  // un-hovering
  const clickUnhighlight = "false";
  // whether to also highlight links that are unique
  const highlightUnique = "true";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach mouse and focus listeners to link
      link.addEventListener("mouseenter", onLinkFocus);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("mouseleave", onLinkUnhover);
    }

    // attach click and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("hashchange", onHashChange);

    // run hash change on window load in case user has navigated
    // directly to hash
    onHashChange();
  }

  // when link is focused (tabbed to) or hovered
  function onLinkFocus() {
    highlight(this);
  }

  // when link is unhovered
  function onLinkUnhover() {
    if (clickUnhighlight !== "true") unhighlightAll();
  }

  // when the mouse is clicked anywhere in window
  function onClick(event) {
    unhighlightAll();
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) glowElement(target);
  }

  // start glow sequence on an element
  function glowElement(element) {
    const startGlow = function () {
      onGlowEnd();
      element.dataset.glow = "true";
      element.addEventListener("animationend", onGlowEnd);
    };
    const onGlowEnd = function () {
      element.removeAttribute("data-glow");
      element.removeEventListener("animationend", onGlowEnd);
    };
    startGlow();
  }

  // highlight link and all others with same target
  function highlight(link) {
    // force unhighlight all to start fresh
    unhighlightAll();

    // get links with same target
    if (!link) return;
    const sameLinks = getSameLinks(link);

    // if link unique and option is off, exit and don't highlight
    if (sameLinks.length <= 1 && highlightUnique !== "true") return;

    // highlight all same links, and "select" (special highlight) this
    // one
    for (const sameLink of sameLinks) {
      if (sameLink === link) sameLink.setAttribute("data-selected", "true");
      else sameLink.setAttribute("data-highlighted", "true");
    }
  }

  // unhighlight all links
  function unhighlightAll() {
    const links = getLinks();
    for (const link of links) {
      link.setAttribute("data-selected", "false");
      link.setAttribute("data-highlighted", "false");
    }
  }

  // get links with same target
  function getSameLinks(link) {
    const results = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        results.push(otherLink);
    }
    return results;
  }

  // get all links of types we wish to handle
  function getLinks() {
    let query = "a";
    if (externalLinks !== "true") query += '[href^="#"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelectorAll(query);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  @media only screen {
    /* anything with data-highlighted attribute true */
    [data-highlighted="true"] {
      background: #ffeb3b;
    }

    /* anything with data-selected attribute true */
    [data-selected="true"] {
      background: #ff8a65 !important;
    }

    /* animation definition for glow */
    @keyframes highlight_glow {
      0% {
        background: none;
      }
      10% {
        background: #bbdefb;
      }
      100% {
        background: none;
      }
    }

    /* anything with data-glow attribute true */
    [data-glow="true"] {
      animation: highlight_glow 2s;
    }
  }
</style>
<!--
  Table of Contents Plugin

  Provides a "table of contents" (toc) panel on the side of the document that
  allows the user to conveniently navigate between sections of the document.
-->

<script type="module">
  // which types of elements to add links for, in "document.querySelector" format
  const typesQuery = "h1, h2, h3";
  // whether toc starts open. use 'true' or 'false', or 'auto' to
  // use 'true' behavior when screen wide enough and 'false' when not
  const startOpen = "false";
  // whether toc closes when clicking on toc link. use 'true' or
  // 'false', or 'auto' to use 'false' behavior when screen wide
  // enough and 'true' when not
  const clickClose = "auto";
  // if list item is more than this many characters, text will be
  // truncated
  const charLimit = "50";
  // whether or not to show bullets next to each toc item
  const bullets = "false";

  // start script
  function start() {
    // make toc panel and populate with entries (links to document
    // sections)
    const panel = makePanel();
    if (!panel) return;
    makeEntries(panel);
    // attach panel to document after making entries, so 'toc' heading
    // in panel isn't included in toc
    document.body.insertBefore(panel, document.body.firstChild);

    // initial panel state
    if (startOpen === "true" || (startOpen === "auto" && !isSmallScreen()))
      openPanel();
    else closePanel();

    // attach click, scroll, and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("scroll", onScroll);
    window.addEventListener("hashchange", onScroll);
    window.addEventListener("keyup", onKeyUp);
    onScroll();

    // add class to push document body down out of way of toc button
    document.body.classList.add("toc_body_nudge");
  }

  // determine if screen wide enough to fit toc panel
  function isSmallScreen() {
    // in default theme:
    // 816px = 8.5in = width of "page" (<body>) element
    // 260px = min width of toc panel (*2 for both sides of <body>)
    return window.innerWidth < 816 + 260 * 2;
  }

  // when mouse is clicked anywhere in window
  function onClick() {
    if (isSmallScreen()) closePanel();
  }

  // when window is scrolled or hash changed
  function onScroll() {
    highlightViewed();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    // close on esc
    if (event.key === "Escape") closePanel();
  }

  // find entry of currently viewed document section in toc and highlight
  function highlightViewed() {
    const firstId = getFirstInView(typesQuery);

    // get toc entries (links), unhighlight all, then highlight viewed
    const list = document.getElementById("toc_list");
    if (!firstId || !list) return;
    const links = list.querySelectorAll("a");
    for (const link of links) link.dataset.viewing = "false";
    const link = list.querySelector('a[href="#' + firstId + '"]');
    if (!link) return;
    link.dataset.viewing = "true";
  }

  // get first or previous toc listed element in top half of view
  function getFirstInView(query) {
    // get all elements matching query and with id
    const elements = document.querySelectorAll(query);
    const elementsWithIds = [];
    for (const element of elements) {
      if (element.id) elementsWithIds.push(element);
    }

    // get first or previous element in top half of view
    for (let i = 0; i < elementsWithIds.length; i++) {
      const element = elementsWithIds[i];
      const prevElement = elementsWithIds[Math.max(0, i - 1)];
      if (element.getBoundingClientRect().top >= 0) {
        if (element.getBoundingClientRect().top < window.innerHeight / 2)
          return element.id;
        else return prevElement.id;
      }
    }
  }

  // make panel
  function makePanel() {
    // create panel
    const panel = document.createElement("div");
    panel.id = "toc_panel";
    if (bullets === "true") panel.dataset.bullets = "true";

    // create header
    const header = document.createElement("div");
    header.id = "toc_header";

    // create toc button
    const button = document.createElement("button");
    button.id = "toc_button";
    button.innerHTML = document.querySelector(".icon_th_list").innerHTML;
    button.title = "Table of Contents";
    button.classList.add("icon_button");

    // create header text
    const text = document.createElement("h4");
    text.innerHTML = "Table of Contents";

    // create container for toc list
    const list = document.createElement("div");
    list.id = "toc_list";

    // attach click listeners
    panel.addEventListener("click", onPanelClick);
    header.addEventListener("click", onHeaderClick);
    button.addEventListener("click", onButtonClick);

    // attach elements
    header.appendChild(button);
    header.appendChild(text);
    panel.appendChild(header);
    panel.appendChild(list);

    return panel;
  }

  // create toc entries (links) to each element of the specified types
  function makeEntries(panel) {
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) {
      // do not add link if element doesn't have assigned id
      if (!element.id) continue;

      // create link/list item
      const link = document.createElement("a");
      link.classList.add("toc_link");
      switch (element.tagName.toLowerCase()) {
        case "h1":
          link.dataset.level = "1";
          break;
        case "h2":
          link.dataset.level = "2";
          break;
        case "h3":
          link.dataset.level = "3";
          break;
        case "h4":
          link.dataset.level = "4";
          break;
      }
      link.title = element.innerText;
      let text = element.innerText;
      if (text.length > charLimit) text = text.slice(0, charLimit) + "...";
      link.innerHTML = text;
      link.href = "#" + element.id;
      link.addEventListener("click", onLinkClick);

      // attach link
      panel.querySelector("#toc_list").appendChild(link);
    }
  }

  // when panel is clicked
  function onPanelClick(event) {
    // stop click from propagating to window/document and closing panel
    event.stopPropagation();
  }

  // when header itself is clicked
  function onHeaderClick(event) {
    togglePanel();
  }

  // when button is clicked
  function onButtonClick(event) {
    togglePanel();
    // stop header underneath button from also being clicked
    event.stopPropagation();
  }

  // when link is clicked
  function onLinkClick(event) {
    if (clickClose === "true" || (clickClose === "auto" && isSmallScreen()))
      closePanel();
    else openPanel();
  }

  // open panel if closed, close if opened
  function togglePanel() {
    const panel = document.getElementById("toc_panel");
    if (!panel) return;

    if (panel.dataset.open === "true") closePanel();
    else openPanel();
  }

  // open panel
  function openPanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "true";
  }

  // close panel
  function closePanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "false";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- th list icon -->

<template class="icon_th_list">
  <!-- modified from: https://fontawesome.com/icons/th-list -->
  <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
    <path
      fill="currentColor"
      d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* toc panel */
    #toc_panel {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      background: #ffffff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      z-index: 2;
    }

    /* toc panel when closed */
    #toc_panel[data-open="false"] {
      min-width: 60px;
      width: 60px;
      height: 60px;
      border-right: solid 1px #bdbdbd;
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc panel when open */
    #toc_panel[data-open="true"] {
      min-width: 260px;
      max-width: 480px;
      /* keep panel edge consistent distance away from "page" edge */
      width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
      bottom: 0;
      border-right: solid 1px #bdbdbd;
    }

    /* toc panel header */
    #toc_header {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: center;
      height: 60px;
      margin: 0;
      padding: 20px;
    }

    /* toc panel header when hovered */
    #toc_header:hover {
      cursor: pointer;
    }

    /* toc panel header when panel open */
    #toc_panel[data-open="true"] > #toc_header {
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc open/close header button */
    #toc_button {
      margin-right: 20px;
    }

    /* hide toc list and header text when closed */
    #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
    #toc_panel[data-open="false"] > #toc_list {
      display: none;
    }

    /* toc list of entries */
    #toc_list {
      box-sizing: border-box;
      width: 100%;
      padding: 20px;
      position: absolute;
      top: calc(60px + 1px);
      bottom: 0;
      overflow: auto;
    }

    /* toc entry, link to section in document */
    .toc_link {
      display: block;
      padding: 5px;
      position: relative;
      font-weight: 600;
      text-decoration: none;
    }

    /* toc entry when hovered or when "viewed" */
    .toc_link:hover,
    .toc_link[data-viewing="true"] {
      background: #f5f5f5;
    }

    /* toc entry, level 1 indentation */
    .toc_link[data-level="1"] {
      margin-left: 0;
    }

    /* toc entry, level 2 indentation */
    .toc_link[data-level="2"] {
      margin-left: 20px;
    }

    /* toc entry, level 3 indentation */
    .toc_link[data-level="3"] {
      margin-left: 40px;
    }

    /* toc entry, level 4 indentation */
    .toc_link[data-level="4"] {
      margin-left: 60px;
    }

    /* toc entry bullets */
    #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
      position: absolute;
      left: -15px;
      top: -1px;
      font-size: 1.5em;
    }

    /* toc entry, level 2 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
      content: "\2022";
    }

    /* toc entry, level 3 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
      content: "\25AB";
    }

    /* toc entry, level 4 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
      content: "-";
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* push <body> ("page") element down to make room for toc icon */
    .toc_body_nudge {
      padding-top: 60px;
    }

    /* toc icon when panel closed and not hovered */
    #toc_panel[data-open="false"]:not(:hover) {
      background: rgba(255, 255, 255, 0.75);
    }
  }

  /* always hide toc panel on print */
  @media only print {
    #toc_panel {
      display: none;
    }
  }
</style>
<!-- 
  Tooltips Plugin

  Makes it such that when the user hovers or focuses a link to a citation or
  figure, a tooltip appears with a preview of the reference content, along with
  arrows to navigate between instances of the same reference in the document.
-->

<script type="module">
  // whether user must click off to close tooltip instead of just un-hovering
  const clickClose = "false";
  // delay (in ms) between opening and closing tooltip
  const delay = "100";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach hover and focus listeners to link
      link.addEventListener("mouseover", onLinkHover);
      link.addEventListener("mouseleave", onLinkUnhover);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("touchend", onLinkTouch);
    }

    // attach mouse, key, and resize listeners to window
    window.addEventListener("mousedown", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("keyup", onKeyUp);
    window.addEventListener("resize", onResize);
  }

  // when link is hovered
  function onLinkHover() {
    // function to open tooltip
    const delayOpenTooltip = function () {
      openTooltip(this);
    }.bind(this);

    // run open function after delay
    this.openTooltipTimer = window.setTimeout(delayOpenTooltip, delay);
  }

  // when mouse leaves link
  function onLinkUnhover() {
    // cancel opening tooltip
    window.clearTimeout(this.openTooltipTimer);

    // don't close on unhover if option specifies
    if (clickClose === "true") return;

    // function to close tooltip
    const delayCloseTooltip = function () {
      // if tooltip open and if mouse isn't over tooltip, close
      const tooltip = document.getElementById("tooltip");
      if (tooltip && !tooltip.matches(":hover")) closeTooltip();
    };

    // run close function after delay
    this.closeTooltipTimer = window.setTimeout(delayCloseTooltip, delay);
  }

  // when link is focused (tabbed to)
  function onLinkFocus(event) {
    openTooltip(this);
  }

  // when link is touched on touch screen
  function onLinkTouch(event) {
    // attempt to force hover state on first tap always, and trigger
    // regular link click (and navigation) on second tap
    if (event.target === document.activeElement) event.target.click();
    else {
      document.activeElement.blur();
      event.target.focus();
    }
    if (event.cancelable) event.preventDefault();
    event.stopPropagation();
    return false;
  }

  // when mouse is clicked anywhere in window
  function onClick(event) {
    closeTooltip();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("tooltip_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("tooltip_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeTooltip();
        break;
    }
  }

  // when window is resized or zoomed
  function onResize() {
    closeTooltip();
  }

  // get all links of types we wish to handle
  function getLinks() {
    const queries = [];
    // exclude buttons, anchor links, toc links, etc
    const exclude =
      ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    queries.push('a[href^="#ref-"]' + exclude); // citation links
    queries.push('a[href^="#fig:"]' + exclude); // figure links
    const query = queries.join(", ");
    return document.querySelectorAll(query);
  }

  // get links with same target, get index of link in set, get total
  // same links
  function getSameLinks(link) {
    const sameLinks = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        sameLinks.push(otherLink);
    }

    return {
      elements: sameLinks,
      index: sameLinks.indexOf(link),
      total: sameLinks.length,
    };
  }

  // open tooltip
  function openTooltip(link) {
    // delete tooltip if it exists, start fresh
    closeTooltip();

    // make tooltip element
    const tooltip = makeTooltip(link);

    // if source couldn't be found and tooltip not made, exit
    if (!tooltip) return;

    // make navbar elements
    const navBar = makeNavBar(link);
    if (navBar) tooltip.firstElementChild.appendChild(navBar);

    // attach tooltip to page
    document.body.appendChild(tooltip);

    // position tooltip
    const position = function () {
      positionTooltip(link);
    };
    position();

    // if tooltip contains images, position again after they've loaded
    const imgs = tooltip.querySelectorAll("img");
    for (const img of imgs) img.addEventListener("load", position);
  }

  // close (delete) tooltip
  function closeTooltip() {
    const tooltip = document.getElementById("tooltip");
    if (tooltip) tooltip.remove();
  }

  // make tooltip
  function makeTooltip(link) {
    // get target element that link points to
    const source = getSource(link);

    // if source can't be found, exit
    if (!source) return;

    // create new tooltip
    const tooltip = document.createElement("div");
    tooltip.id = "tooltip";
    const tooltipContent = document.createElement("div");
    tooltipContent.id = "tooltip_content";
    tooltip.appendChild(tooltipContent);

    // make copy of source node and put in tooltip
    const sourceCopy = makeCopy(source);
    tooltipContent.appendChild(sourceCopy);

    // attach mouse event listeners
    tooltip.addEventListener("click", onTooltipClick);
    tooltip.addEventListener("mousedown", onTooltipClick);
    tooltip.addEventListener("touchstart", onTooltipClick);
    tooltip.addEventListener("mouseleave", onTooltipUnhover);

    // (for interaction with lightbox plugin)
    // transfer click on tooltip copied img to original img
    const sourceImg = source.querySelector("img");
    const sourceCopyImg = sourceCopy.querySelector("img");
    if (sourceImg && sourceCopyImg) {
      const clickImg = function () {
        sourceImg.click();
        closeTooltip();
      };
      sourceCopyImg.addEventListener("click", clickImg);
    }

    return tooltip;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // when tooltip is clicked
  function onTooltipClick(event) {
    // when user clicks on tooltip, stop click from transferring
    // outside of tooltip (eg, click off to close tooltip, or eg click
    // off to unhighlight same refs)
    event.stopPropagation();
  }

  // when tooltip is unhovered
  function onTooltipUnhover(event) {
    if (clickClose === "true") return;

    // make sure new mouse/touch/focus no longer over tooltip or any
    // element within it
    const tooltip = document.getElementById("tooltip");
    if (!tooltip) return;
    if (this.contains(event.relatedTarget)) return;

    closeTooltip();
  }

  // make nav bar to go betwen prev/next instances of same reference
  function makeNavBar(link) {
    // find other links to the same source
    const sameLinks = getSameLinks(link);

    // don't show nav bar when singular reference
    if (sameLinks.total <= 1) return;

    // find prev/next links with same target
    const prevLink = getPrevLink(link, sameLinks);
    const nextLink = getNextLink(link, sameLinks);

    // create nav bar
    const navBar = document.createElement("div");
    navBar.id = "tooltip_nav_bar";
    const text = sameLinks.index + 1 + " of " + sameLinks.total;

    // create nav bar prev/next buttons
    const prevButton = document.createElement("button");
    const nextButton = document.createElement("button");
    prevButton.id = "tooltip_prev_button";
    nextButton.id = "tooltip_next_button";
    prevButton.title =
      "Jump to the previous occurence of this item in the document [←]";
    nextButton.title =
      "Jump to the next occurence of this item in the document [→]";
    prevButton.classList.add("icon_button");
    nextButton.classList.add("icon_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;
    navBar.appendChild(prevButton);
    navBar.appendChild(document.createTextNode(text));
    navBar.appendChild(nextButton);

    // attach click listeners to buttons
    prevButton.addEventListener("click", function () {
      onPrevNextClick(link, prevLink);
    });
    nextButton.addEventListener("click", function () {
      onPrevNextClick(link, nextLink);
    });

    return navBar;
  }

  // get previous link with same target
  function getPrevLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if < 1
    let index;
    if (sameLinks.index - 1 >= 0) index = sameLinks.index - 1;
    else index = sameLinks.total - 1;
    return sameLinks.elements[index];
  }

  // get next link with same target
  function getNextLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if > total
    let index;
    if (sameLinks.index + 1 <= sameLinks.total - 1) index = sameLinks.index + 1;
    else index = 0;
    return sameLinks.elements[index];
  }

  // get element that is target of link or url hash
  function getSource(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector('[id="' + id + '"]');
    if (!target) return;

    // if ref or figure, modify target to get expected element
    if (id.indexOf("ref-") === 0) target = target.querySelector("p");
    else if (id.indexOf("fig:") === 0) target = target.querySelector("figure");

    return target;
  }

  // when prev/next arrow button is clicked
  function onPrevNextClick(link, prevNextLink) {
    if (link && prevNextLink)
      goToElement(prevNextLink, window.innerHeight * 0.5);
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);
    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // determine position to place tooltip based on link position in
  // viewport and tooltip size
  function positionTooltip(link, left, top) {
    const tooltipElement = document.getElementById("tooltip");
    if (!tooltipElement) return;

    // get convenient vars for position/dimensions of
    // link/tooltip/page/view
    link = getRectInPage(link);
    const tooltip = getRectInPage(tooltipElement);
    const view = getRectInPage();

    // horizontal positioning
    if (left)
      // use explicit value
      left = left;
    else if (link.left + tooltip.width < view.right)
      // fit tooltip to right of link
      left = link.left;
    else if (link.right - tooltip.width > view.left)
      // fit tooltip to left of link
      left = link.right - tooltip.width;
    // center tooltip in view
    else left = (view.right - view.left) / 2 - tooltip.width / 2;

    // vertical positioning
    if (top)
      // use explicit value
      top = top;
    else if (link.top - tooltip.height > view.top)
      // fit tooltip above link
      top = link.top - tooltip.height;
    else if (link.bottom + tooltip.height < view.bottom)
      // fit tooltip below link
      top = link.bottom;
    else {
      // center tooltip in view
      top = view.top + view.height / 2 - tooltip.height / 2;
      // nudge off of link to left/right if possible
      if (link.right + tooltip.width < view.right) left = link.right;
      else if (link.left - tooltip.width > view.left)
        left = link.left - tooltip.width;
    }

    tooltipElement.style.left = left + "px";
    tooltipElement.style.top = top + "px";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* tooltip container */
    #tooltip {
      position: absolute;
      width: 50%;
      min-width: 240px;
      max-width: 75%;
      z-index: 1;
    }

    /* tooltip content */
    #tooltip_content {
      margin-bottom: 5px;
      padding: 20px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
      overflow-wrap: break-word;
    }

    /* tooltip copy of paragraphs and figures */
    #tooltip_content > p,
    #tooltip_content > figure {
      margin: 0;
      max-height: 320px;
      overflow-y: auto;
    }

    /* tooltip copy of <img> */
    #tooltip_content > figure > img,
    #tooltip_content > figure > svg {
      max-height: 260px;
    }

    /* navigation bar */
    #tooltip_nav_bar {
      margin-top: 10px;
      text-align: center;
    }

    /* navigation bar previous/next buton */
    #tooltip_nav_bar > .icon_button {
      position: relative;
      top: 3px;
    }

    /* navigation bar previous button */
    #tooltip_nav_bar > .icon_button:first-of-type {
      margin-right: 5px;
    }

    /* navigation bar next button */
    #tooltip_nav_bar > .icon_button:last-of-type {
      margin-left: 5px;
    }
  }

  /* always hide tooltip on print */
  @media only print {
    #tooltip {
      display: none;
    }
  }
</style>
<!--
  Analytics Plugin (third-party) 
  
  Copy and paste code from Google Analytics or similar service here.
-->
<!-- 
  Annotations Plugin

  Allows public annotation of the  manuscript. See https://web.hypothes.is/.
-->

<script>
  // configuration
  window.hypothesisConfig = function () {
    return {
      branding: {
        accentColor: "#2196f3",
        appBackgroundColor: "#f8f8f8",
        ctaBackgroundColor: "#f8f8f8",
        ctaTextColor: "#000000",
        selectionFontFamily: "Open Sans, Helvetica, sans serif",
        annotationFontFamily: "Open Sans, Helvetica, sans serif",
      },
    };
  };

  // hypothesis client script
  const embed = "https://hypothes.is/embed.js";
  // hypothesis annotation count query url
  const query = "https://api.hypothes.is/api/search?limit=0&url=";

  // start script
  function start() {
    const button = makeButton();
    document.body.insertBefore(button, document.body.firstChild);
    insertCount(button);
  }

  // make button
  function makeButton() {
    // create button
    const button = document.createElement("button");
    button.id = "hypothesis_button";
    button.innerHTML = document.querySelector(".icon_hypothesis").innerHTML;
    button.title = "Hypothesis annotations";
    button.classList.add("icon_button");

    function onClick(event) {
      onButtonClick(event, button);
    }

    // attach click listeners
    button.addEventListener("click", onClick);

    return button;
  }

  // insert annotations count
  async function insertCount(button) {
    // get annotation count from Hypothesis based on url
    let count = "-";
    try {
      const canonical = document.querySelector('link[rel="canonical"]');
      const location = window.location;
      const url = encodeURIComponent((canonical || location).href);
      const response = await fetch(query + url);
      const json = await response.json();
      count = json.total || "-";
    } catch (error) {
      console.log(error);
    }

    // put count into button
    const counter = document.createElement("span");
    counter.id = "hypothesis_count";
    counter.innerHTML = count;
    button.title = "View " + count + " Hypothesis annotations";
    button.append(counter);
  }

  // when button is clicked
  function onButtonClick(event, button) {
    const script = document.createElement("script");
    script.src = embed;
    document.body.append(script);
    button.remove();
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
  <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
  <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
    <path
      fill="currentColor"
      d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  /* hypothesis activation button */
  #hypothesis_button {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: #ffffff;
    border-radius: 0;
    border-left: solid 1px #bdbdbd;
    border-bottom: solid 1px #bdbdbd;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    z-index: 2;
  }

  /* hypothesis button svg */
  #hypothesis_button > svg {
    position: relative;
    top: -4px;
  }

  /* hypothesis annotation count */
  #hypothesis_count {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 5px;
  }

  /* side panel */
  .annotator-frame {
    width: 280px !important;
  }

  /* match highlight color to rest of theme */
  .annotator-highlights-always-on .annotator-hl {
    background-color: #ffeb3b !important;
  }

  /* match focused color to rest of theme */
  .annotator-hl.annotator-hl-focused {
    background-color: #ff8a65 !important;
  }

  /* match bucket bar color to rest of theme */
  .annotator-bucket-bar {
    background: #f5f5f5 !important;
  }

  /* always hide button, toolbar, and tooltip on print */
  @media only print {
    #hypothesis_button {
      display: none;
    }

    .annotator-frame {
      display: none !important;
    }

    hypothesis-adder {
      display: none !important;
    }
  }
</style>
<!-- 
  Mathjax Plugin (third-party) 

  Allows the proper rendering of math/equations written in LaTeX.
  See https://www.mathjax.org/.
-->

<script type="text/x-mathjax-config">
  // configuration
  MathJax.Hub.Config({
    "CommonHTML": { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
    "SVG": { linebreaks: { automatic: true } },
    "fast-preview": { disabled: true }
  });
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
  integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A=="
  crossorigin="anonymous"
></script>

<style>
  /* mathjax containers */
  .math.display > span:not(.MathJax_Preview) {
    /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
    display: flex !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }

  /* right click menu */
  .MathJax_Menu {
    border-radius: 5px !important;
    border: solid 1px #bdbdbd !important;
    box-shadow: none !important;
  }

  /* equation auto-number */
  span[id^="eq:"] > span.math.display + span {
    font-weight: 600;
  }

  /* equation */
  span[id^="eq:"] > span.math.display > span {
    /* nudge to make room for equation auto-number and anchor */
    margin-right: 60px !important;
  }
</style>
</body>
</html>
